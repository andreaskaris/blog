<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>Containers in Linux - Andreas Karis Blog</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="generator" content="mkdocs-1.1.2, mkdocs-gitbook-1.0.7">

<link rel="shortcut icon" href="../../images/favicon.ico" type="image/x-icon">
<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta rel="next" href="" />
<link href="../../css/style.min.css" rel="stylesheet"> 
</head>

<body>
<div class="book">
<div class="book-summary">
<div id="book-search-input" role="search">
<input type="text" placeholder="Type to search" />
</div> <!-- end of book-search-input -->

<nav role="navigation">
<ul class="summary">
<li>
<a href="../.." target="_blank" class="custom-link">Andreas Karis Blog</a>
</li>
<li class="divider"></li>
<li class="chapter" data-path="">
<a href="../..">Home</a>
<li class="header">Ceph</li>

<li>
<a href="../../ceph/ceph-manual-test/" class="">Ceph manual test with qemu</a>
</li>

<li class="header">Containers</li>

<li>
<a href="../cgroups/" class="">cgroups</a>
</li>

<li>
<a href="./" class="">Containers in Linux</a>
</li>

<li>
<a href="../../openshift/list_docker_registry_containers/" class="">List container images in registry</a>
</li>

<li>
<a href="../namespaces/" class="">namespaces</a>
</li>

<li class="header">Linux</li>

<li>
<a href="../cgroups/" class="">cgroups</a>
</li>

<li>
<a href="./" class="active">Containers in Linux</a>
</li>

<li>
<a href="../java-idrac-issues/" class="">Java Idrac Issues</a>
</li>

<li>
<a href="../hugepages/" class="">Hugepages</a>
</li>

<li>
<a href="../meson/" class="">meson</a>
</li>

<li>
<a href="../namespaces/" class="">namespaces</a>
</li>

<li>
<a href="../old_java_version_with_xorgs_in_container/" class="">Old Java inside a container with xorgs</a>
</li>

<li class="header">Networking</li>

<li>
<a href="../../networking/arp_and_the_neighbor_table/" class="">ARP and the Neighbor table</a>
</li>

<li>
<a href="../../networking/bpf-and-tcpdump/" class="">BPF and tcpdump</a>
</li>

<li>
<a href="../../networking/bonding_in_linux/" class="">Bonding in Linux</a>
</li>

<li>
<a href="../../networking/juniper_x520/" class="">Configure Juniper switch</a>
</li>

<li>
<a href="../../networking/haproxy-and-h2c/" class="">haproxy and HTTP/2</a>
</li>

<li>
<a href="../../networking/geneve_tunneling/" class="">Geneve tunneling</a>
</li>

<li>
<a href="../../networking/netlink/" class="">Netlink</a>
</li>

<li>
<a href="../../networking/ovn-kind/" class="">OVN kind</a>
</li>

<li>
<a href="../../networking/ovn_standalone_on_fedora31/" class="">OVN standalone on Fedora 31</a>
</li>

<li>
<a href="../../networking/ovs_recirculation/" class="">OVS packet recirculation</a>
</li>

<li>
<a href="../../networking/ovs-vxlan-tunnels-and-dscp/" class="">OVS VXLAN tunnels and DSCP</a>
</li>

<li>
<a href="../../networking/ovs_with_gdb/" class="">OVS with GDB</a>
</li>

<li>
<a href="../../networking/sctp/" class="">SCTP</a>
</li>

<li>
<a href="../../networking/wireguard/" class="">Wireguard</a>
</li>

<li class="header">OpenShift</li>

<li>
<a href="../../openshift/alertmanager/" class="">AlertManager</a>
</li>

<li>
<a href="../../openshift/cpu-manager-with-custom-machine-config-pool/" class="">CPU manager with custom MachineConfigPool</a>
</li>

<li>
<a href="../../openshift/crio-conmon-runc/" class="">Crio vs conmon vs runc</a>
</li>

<li>
<a href="../../openshift/etcd_perf/" class="">Etcd Performance tests</a>
</li>

<li>
<a href="../../openshift/openshift_httpbin_tshark_sidecar/" class="">Httpbin tshark sidecar container</a>
</li>

<li>
<a href="../../openshift/kubernetes_cluster/" class="">Hints for installing kubernetes on Fedora</a>
</li>

<li>
<a href="../../openshift/HPA/" class="">Horizontal Pod Autoscaler</a>
</li>

<li>
<a href="../../openshift/how_rhcos_updates_work/" class="">How RHCOS updates work</a>
</li>

<li>
<a href="../../openshift/ocp4-infra-nodes-with-machineset-without-worker-label/" class="">Infra nodes with MachineSets without worker label</a>
</li>

<li>
<a href="../../openshift/ingresscontroller_router_sharding_ocp_on_osp/" class="">Ingress Controller Sharding OCP on OSP</a>
</li>

<li>
<a href="../../openshift/ingress-controller-sharding-on-separate-vip/" class="">Ingress Controller Sharding on separate VIP</a>
</li>

<li>
<a href="../../openshift/openshift_mirror_registry/" class="">Installing a cluster with a mirror registry</a>
</li>

<li>
<a href="../../openshift/istio-1.6-on-ocp.4.x/" class="">Istio 1.6 on OpenShift 4.x</a>
</li>

<li>
<a href="../../openshift/kata/" class="">kata containers and the kata operatora</a>
</li>

<li>
<a href="../../openshift/kind-with-private-registry/" class="">Kind with private registry</a>
</li>

<li>
<a href="../../openshift/mounting-container-image/" class="">Mount a container image</a>
</li>

<li>
<a href="../../openstack/install_openshift_on_openstack/" class="">OpenShift on OpenStack</a>
</li>

<li>
<a href="../../openshift/private-registry/" class="">Private container registry</a>
</li>

<li>
<a href="../../openshift/proxy-ocp-4.5/" class="">Proxy OCP 4.5</a>
</li>

<li>
<a href="../../openshift/scc/" class="">Security Context Constraints (SCC)</a>
</li>

<li>
<a href="../../openshift/fix-selinux-labels-coreos/" class="">SElinux labels fix</a>
</li>

<li>
<a href="../../networking/sctp/" class="">SCTP</a>
</li>

<li>
<a href="../../openshift/openshift_troubleshooting_etcd_state/" class="">Troubleshooting etcd state</a>
</li>

<li>
<a href="../../openshift/useful-ocp-curl/" class="">Querying the OCP 4.x upgrades info API</a>
</li>

<li>
<a href="../../openshift/troubleshooting_openshift_on_openstack_worker_creation/" class="">Troubleshooting OpenShift on OpenStack worker creation</a>
</li>

<li class="header">OpenStack</li>

<li>
<a href="../../openstack/reattach_to_running_deployment/" class="">Reattach to running deployment</a>
</li>

<li>
<a href="../../openstack/using_clouds_yaml/" class="">Using clouds.yaml</a>
</li>

<li class="header">OperatorSDK</li>

<li>
<a href="../../operator-sdk/operator-sdk-reconciliation/" class="">Controller Reconciliation</a>
</li>

<li class="divider"></li>



<li><a href="http://www.mkdocs.org">
Published with MkDocs
</a></li>

<li><a href="https://github.com/GitbookIO/theme-default">
Theme by GitBook
</a></li>
</ul>

</nav>

</div> <!-- end of book-summary -->

<div class="book-body">
<div class="body-inner">
<div class="book-header" role="navigation">

<!-- Title -->
<h1>
<i class="fa fa-circle-o-notch fa-spin"></i>
<a href="." ></a>
</h1>

</div> <!-- end of book-header -->

<div class="page-wrapper" tabindex="-1" role="main">
<div class="page-inner">
<div id="book-search-results">
<div class="search-noresults">

<section class="normal markdown-section">



<h1 id="linux-containers">Linux containers</h1>
<h2 id="what-is-a-linux-container">What is a Linux container</h2>
<p>Introductory read about the components that make up a container:</p>
<p><a href="https://medium.com/@nagarwal/understanding-the-docker-internals-7ccb052ce9fe">https://medium.com/@nagarwal/understanding-the-docker-internals-7ccb052ce9fe</a></p>
<h2 id="relations-ship-between-containers-cgroups-selinux-and-containers">Relations ship between containers, cgroups, SELinux and containers</h2>
<p><code>Red Hat Enterprise Linux Atomis Host 7 Overview of Containers in Red Hat Systems</code> - <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html-single/overview_of_containers_in_red_hat_systems/index">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html-single/overview_of_containers_in_red_hat_systems/index</a>:</p>
<pre><code>Kernel namespaces ensure process isolation and cgroups are employed to control
the system resources. SELinux is used to assure separation between the host and the container and
also between the individual containers. Management interface forms a higher layer that interacts with
the aforementioned kernel components and provides tools for construction and management of
containers.
</code></pre>

<p><code>Red Hat Enterprise Linux Atomis Host 7 Overview of Containers in Red Hat Systems</code> - <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html-single/overview_of_containers_in_red_hat_systems/index">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html-single/overview_of_containers_in_red_hat_systems/index</a>:</p>
<pre><code>Namespaces
The kernel provides process isolation by creating separate namespaces for containers. Namespaces
enable creating an abstraction of a particular global system resource and make it appear as a
separated instance to processes within a namespace. Consequently, several containers can use the
same resource simultaneously without creating a conflict.
(...)
Control Groups (cgroups)
The kernel uses cgroups to group processes for the purpose of system resource management.
Cgroups allocate CPU time, system memory, network bandwidth, or combinations of these among user-
defined groups of tasks. In Red Hat Enterprise Linux 7, cgroups are managed with systemd slice, scope,
and service units. For more information on cgroups, see the Red Hat Enterprise Linux 7 Resource
Management Guide.
SELinux
SELinux provides secure separation of containers by applying SELinux policy and labels. It integrates
with virtual devices by using the sVirt technology. For more information see the Red Hat Enterprise
Linux 7 SELinux Users and Administrators Guide.
(...)
</code></pre>

<p><code>Red Hat Enterprise Linux Atomis Host 7 Overview of Containers in Red Hat Systems</code> - <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html-single/overview_of_containers_in_red_hat_systems/index">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html-single/overview_of_containers_in_red_hat_systems/index</a>:</p>
<pre><code>1.3. SECURE CONTAINERS WITH SELINUX
From the security point of view, there is a need to isolate the host system from a container and to
isolate containers from each other. The kernel features used by containers, namely cgroups and
namespaces, by themselves provide a certain level of security. Cgroups ensure that a single container
cannot exhaust a large amount of system resources, thus preventing some denial-of-service attacks.
By virtue of namespaces, the /dev directory created within a container is private to each container,
and therefore unaffected by the host changes. However, this can not prevent a hostile process from
breaking out of the container since the entire system is not namespaced or containerized. Another
level of separation, provided by SELinux, is therefore needed.
Security-Enhanced Linux (SELinux) is an implementation of a mandatory access control (MAC)
mechanism, multi-level security (MLS), and multi-category security (MCS) in the Linux kernel. The
sVirt project builds upon SELinux and integrates with Libvirt to provide a MAC framework for virtual
machines and containers. This architecture provides a secure separation for containers as it prevents
root processes within the container from interfering with other processes running outside this
container. The containers created with Docker are automatically assigned with an SELinux context
specified in the SELinux policy.
5Red Hat Enterprise Linux Atomic Host 7 Overview of Containers in Red Hat Systems
By default, containers created with libvirt tools are assigned with the virtd_lxc_t label (execute ps
-eZ | grep virtd_lxc_t). You can apply sVirt by setting static or dynamic labeling for processes
inside the container.
Note
You might notice that SELinux appears to be disabled inside the container even though it is running in
enforcing mode on host system – you can verify this by executing the getenforce command on host
and in the container. This is to prevent utilities that have SELinux awareness, such as setenforce, to
perform any SELinux activity inside the container.
Note that if SELinux is disabled or running in permissive mode on the host machine, containers are not
separated securely enough. For more information about SELinux, refer to Red Hat Enterprise Linux 7
SELinux Users and Administrators Guide, sVirt is described in Red Hat Enterprise Linux 7 Virtualization
Security Guide.
</code></pre>


</section>
</div> <!-- end of search-noresults -->
<div class="search-results">
<div class="has-results">

<h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
<ul class="search-results-list"></ul>

</div> <!-- end of has-results -->
<div class="no-results">

<h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>

</div> <!-- end of no-results -->
</div> <!-- end of search-results -->
</div> <!-- end of book-search-results -->

</div> <!-- end of page-inner -->
</div> <!-- end of page-wrapper -->

</div> <!-- end of body-inner -->

</div> <!-- end of book-body -->
<script src="../../js/main.js"></script>
<script src="../../search/main.js"></script>
<script src="../../js/gitbook.min.js"></script>
<script src="../../js/theme.min.js"></script>
</body>
</html>