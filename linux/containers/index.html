<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Containers in Linux - Andreas Karis Blog</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Andreas Karis Blog</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Ceph <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../ceph/ceph-manual-test/" class="dropdown-item">Ceph manual test with qemu</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Containers <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../cgroups/" class="dropdown-item">cgroups</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item">Containers in Linux</a>
</li>
                                    
<li>
    <a href="../namespaces/" class="dropdown-item">namespaces</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Linux <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../cgroups/" class="dropdown-item">cgroups</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Containers in Linux</a>
</li>
                                    
<li>
    <a href="../hugepages/" class="dropdown-item">Hugepages</a>
</li>
                                    
<li>
    <a href="../meson/" class="dropdown-item">meson</a>
</li>
                                    
<li>
    <a href="../namespaces/" class="dropdown-item">namespaces</a>
</li>
                                    
<li>
    <a href="../old_java_version_with_xorgs_in_container/" class="dropdown-item">Old Java inside a container with xorgs</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Networking <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../networking/arp_and_the_neighbor_table/" class="dropdown-item">ARP and the Neighbor table</a>
</li>
                                    
<li>
    <a href="../../networking/bonding_in_linux/" class="dropdown-item">Bonding in Linux</a>
</li>
                                    
<li>
    <a href="../../networking/geneve_tunneling/" class="dropdown-item">Geneve tunneling</a>
</li>
                                    
<li>
    <a href="../../networking/juniper_x520/" class="dropdown-item">Configure Juniper switch</a>
</li>
                                    
<li>
    <a href="../../networking/netlink/" class="dropdown-item">Netlink</a>
</li>
                                    
<li>
    <a href="../../networking/ovn-kind/" class="dropdown-item">OVN kind</a>
</li>
                                    
<li>
    <a href="../../networking/ovn_standalone_on_fedora31/" class="dropdown-item">OVN standalone on Fedora 31</a>
</li>
                                    
<li>
    <a href="../../networking/ovs_recirculation/" class="dropdown-item">OVS packet recirculation</a>
</li>
                                    
<li>
    <a href="../../networking/ovs-vxlan-tunnels-and-dscp/" class="dropdown-item">OVS VXLAN tunnels and DSCP</a>
</li>
                                    
<li>
    <a href="../../networking/ovs_with_gdb/" class="dropdown-item">OVS with GDB</a>
</li>
                                    
<li>
    <a href="../../networking/sctp/" class="dropdown-item">SCTP</a>
</li>
                                    
<li>
    <a href="../../networking/wireguard/" class="dropdown-item">Wireguard</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">OpenShift <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../openshift/alertmanager/" class="dropdown-item">AlertManager</a>
</li>
                                    
<li>
    <a href="../../openshift/cpu-manager-with-custom-machine-config-pool/" class="dropdown-item">CPU manager with custom MachineConfigPool</a>
</li>
                                    
<li>
    <a href="../../openshift/crio-conmon-runc/" class="dropdown-item">Crio vs conmon vs runc</a>
</li>
                                    
<li>
    <a href="../../openshift/openshift_httpbin_tshark_sidecar/" class="dropdown-item">Httpbin tshark sidecar container</a>
</li>
                                    
<li>
    <a href="../../openshift/ocp4-infra-nodes-with-machineset-without-worker-label/" class="dropdown-item">Infra nodes with MachineSets without worker label</a>
</li>
                                    
<li>
    <a href="../../openshift/ingresscontroller_router_sharding_ocp_on_osp/" class="dropdown-item">Ingress Controller Sharding OCP on OSP</a>
</li>
                                    
<li>
    <a href="../../openshift/ingress-controller-sharding-on-separate-vip/" class="dropdown-item">Ingress Controller Sharding on separate VIP</a>
</li>
                                    
<li>
    <a href="../../openshift/openshift_mirror_registry/" class="dropdown-item">Installing a cluster with a mirror registry</a>
</li>
                                    
<li>
    <a href="../../openshift/istio-1.6-on-ocp.4.x/" class="dropdown-item">Istio 1.6 on OpenShift 4.x</a>
</li>
                                    
<li>
    <a href="../../openshift/kata/" class="dropdown-item">kata containers and the kata operatora</a>
</li>
                                    
<li>
    <a href="../../openshift/proxy-ocp-4.5/" class="dropdown-item">Proxy OCP 4.5</a>
</li>
                                    
<li>
    <a href="../../openshift/scc/" class="dropdown-item">Security Context Constraints (SCC)</a>
</li>
                                    
<li>
    <a href="../../networking/sctp/" class="dropdown-item">SCTP</a>
</li>
                                    
<li>
    <a href="../../openshift/openshift_troubleshooting_etcd_state/" class="dropdown-item">Troubleshooting etcd state</a>
</li>
                                    
<li>
    <a href="../../openshift/useful-ocp-curl/" class="dropdown-item">Querying the OCP 4.x upgrades info API</a>
</li>
                                    
<li>
    <a href="../../openshift/troubleshooting_openshift_on_openstack_worker_creation/" class="dropdown-item">Troubleshooting OpenShift on OpenStack worker creation</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">OpenStack <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../openstack/reattach_to_running_deployment/" class="dropdown-item">Reattach to running deployment</a>
</li>
                                    
<li>
    <a href="../../openstack/using_clouds_yaml/" class="dropdown-item">Using clouds.yaml</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../cgroups/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../hugepages/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#linux-containers" class="nav-link">Linux containers</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#what-is-a-linux-container" class="nav-link">What is a Linux container</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#relations-ship-between-containers-cgroups-selinux-and-containers" class="nav-link">Relations ship between containers, cgroups, SELinux and containers</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="linux-containers">Linux containers</h1>
<h2 id="what-is-a-linux-container">What is a Linux container</h2>
<p>Introductory read about the components that make up a container:</p>
<p><a href="https://medium.com/@nagarwal/understanding-the-docker-internals-7ccb052ce9fe">https://medium.com/@nagarwal/understanding-the-docker-internals-7ccb052ce9fe</a></p>
<h2 id="relations-ship-between-containers-cgroups-selinux-and-containers">Relations ship between containers, cgroups, SELinux and containers</h2>
<p><code>Red Hat Enterprise Linux Atomis Host 7 Overview of Containers in Red Hat Systems</code> - <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html-single/overview_of_containers_in_red_hat_systems/index">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html-single/overview_of_containers_in_red_hat_systems/index</a>:</p>
<pre><code>Kernel namespaces ensure process isolation and cgroups are employed to control
the system resources. SELinux is used to assure separation between the host and the container and
also between the individual containers. Management interface forms a higher layer that interacts with
the aforementioned kernel components and provides tools for construction and management of
containers.
</code></pre>

<p><code>Red Hat Enterprise Linux Atomis Host 7 Overview of Containers in Red Hat Systems</code> - <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html-single/overview_of_containers_in_red_hat_systems/index">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html-single/overview_of_containers_in_red_hat_systems/index</a>:</p>
<pre><code>Namespaces
The kernel provides process isolation by creating separate namespaces for containers. Namespaces
enable creating an abstraction of a particular global system resource and make it appear as a
separated instance to processes within a namespace. Consequently, several containers can use the
same resource simultaneously without creating a conflict.
(...)
Control Groups (cgroups)
The kernel uses cgroups to group processes for the purpose of system resource management.
Cgroups allocate CPU time, system memory, network bandwidth, or combinations of these among user-
defined groups of tasks. In Red Hat Enterprise Linux 7, cgroups are managed with systemd slice, scope,
and service units. For more information on cgroups, see the Red Hat Enterprise Linux 7 Resource
Management Guide.
SELinux
SELinux provides secure separation of containers by applying SELinux policy and labels. It integrates
with virtual devices by using the sVirt technology. For more information see the Red Hat Enterprise
Linux 7 SELinux Users and Administrators Guide.
(...)
</code></pre>

<p><code>Red Hat Enterprise Linux Atomis Host 7 Overview of Containers in Red Hat Systems</code> - <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html-single/overview_of_containers_in_red_hat_systems/index">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html-single/overview_of_containers_in_red_hat_systems/index</a>:</p>
<pre><code>1.3. SECURE CONTAINERS WITH SELINUX
From the security point of view, there is a need to isolate the host system from a container and to
isolate containers from each other. The kernel features used by containers, namely cgroups and
namespaces, by themselves provide a certain level of security. Cgroups ensure that a single container
cannot exhaust a large amount of system resources, thus preventing some denial-of-service attacks.
By virtue of namespaces, the /dev directory created within a container is private to each container,
and therefore unaffected by the host changes. However, this can not prevent a hostile process from
breaking out of the container since the entire system is not namespaced or containerized. Another
level of separation, provided by SELinux, is therefore needed.
Security-Enhanced Linux (SELinux) is an implementation of a mandatory access control (MAC)
mechanism, multi-level security (MLS), and multi-category security (MCS) in the Linux kernel. The
sVirt project builds upon SELinux and integrates with Libvirt to provide a MAC framework for virtual
machines and containers. This architecture provides a secure separation for containers as it prevents
root processes within the container from interfering with other processes running outside this
container. The containers created with Docker are automatically assigned with an SELinux context
specified in the SELinux policy.
5Red Hat Enterprise Linux Atomic Host 7 Overview of Containers in Red Hat Systems
By default, containers created with libvirt tools are assigned with the virtd_lxc_t label (execute ps
-eZ | grep virtd_lxc_t). You can apply sVirt by setting static or dynamic labeling for processes
inside the container.
Note
You might notice that SELinux appears to be disabled inside the container even though it is running in
enforcing mode on host system – you can verify this by executing the getenforce command on host
and in the container. This is to prevent utilities that have SELinux awareness, such as setenforce, to
perform any SELinux activity inside the container.
Note that if SELinux is disabled or running in permissive mode on the host machine, containers are not
separated securely enough. For more information about SELinux, refer to Red Hat Enterprise Linux 7
SELinux Users and Administrators Guide, sVirt is described in Red Hat Enterprise Linux 7 Virtualization
Security Guide.
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
