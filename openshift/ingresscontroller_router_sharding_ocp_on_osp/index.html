
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Andreas Karis' blog about anything Kubernetes, OpenShift, Linux and Networking">
      
      
      
        <link rel="canonical" href="https://andreaskaris.github.io/blog/openshift/ingresscontroller_router_sharding_ocp_on_osp/">
      
      
        <link rel="prev" href="../ocp4-infra-nodes-with-machineset-without-worker-label/">
      
      
        <link rel="next" href="../ingress-controller-sharding-on-separate-vip/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.21">
    
    
      
        <title>Ingress Controller Sharding OCP on OSP - Andreas Karis Blog</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  <!-- RSS Feed -->
  <link rel="alternate" type="application/rss+xml" title="RSS feed of created content" href="https://andreaskaris.github.io/blog/feed_rss_created.xml">
  <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="https://andreaskaris.github.io/blog/feed_rss_updated.xml">

  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="pink">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Andreas Karis Blog" class="md-header__button md-logo" aria-label="Andreas Karis Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Andreas Karis Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Ingress Controller Sharding OCP on OSP
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../ceph/" class="md-tabs__link">
        Ceph
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../linux/" class="md-tabs__link">
        Linux
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../networking/" class="md-tabs__link">
        Networking
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        OpenShift and Kubernetes
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../openstack/" class="md-tabs__link">
        OpenStack
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../coding/" class="md-tabs__link">
        Coding
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
  
    
    <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner">
          

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Andreas Karis Blog" class="md-nav__button md-logo" aria-label="Andreas Karis Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Andreas Karis Blog
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../ceph/">Ceph</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Ceph
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ceph/ceph-manual-test/" class="md-nav__link">
        Ceph manual test with qemu
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../linux/">Linux</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/cgroups/" class="md-nav__link">
        cgroups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/containers/" class="md-nav__link">
        Containers in Linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/hugepages/" class="md-nav__link">
        Hugepages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/ipxe-boot-environment/" class="md-nav__link">
        iPXE boot environment on Fedora
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/java-idrac-issues/" class="md-nav__link">
        Java Idrac Issues
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/meson/" class="md-nav__link">
        meson
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/namespaces/" class="md-nav__link">
        namespaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/old_java_version_with_xorgs_in_container/" class="md-nav__link">
        Old Java inside a container with xorgs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/org-gnome-shell-overrides/" class="md-nav__link">
        Workaround for org.gnome.shell.overrides not installed
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/get-process-cgroup-info-and-limits/" class="md-nav__link">
        Retrieving process cgroup resource usage and limit info
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/libvirt-uefi-without-secureboot/" class="md-nav__link">
        RHEL Booting a virtual machine with UEFI but without secure boot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/setting-journalctl-limits/" class="md-nav__link">
        Setting journalctl limits
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/cgroups_cpu_quota/" class="md-nav__link">
        Using cgroups for CFS bandwidth control
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../networking/">Networking</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Networking
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/accept-source-routing/" class="md-nav__link">
        Accept Source Routing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/arp_and_the_neighbor_table/" class="md-nav__link">
        ARP and the Neighbor table
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/bpf-and-tcpdump/" class="md-nav__link">
        BPF and tcpdump
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/bonding_in_linux/" class="md-nav__link">
        Bonding in Linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/juniper_x520/" class="md-nav__link">
        Configure Juniper switch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/ovn-interconnection/" class="md-nav__link">
        Hands-on with OVN Interconnection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/haproxy-and-h2c/" class="md-nav__link">
        haproxy and HTTP/2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/install-openvswitch-on-rocky/" class="md-nav__link">
        Install Open vSwitch on Rocky Linux 8
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/geneve_tunneling/" class="md-nav__link">
        Geneve tunneling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/netlink/" class="md-nav__link">
        Netlink
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/ovn_standalone_on_fedora/" class="md-nav__link">
        OVN standalone on Fedora
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/ovs_recirculation/" class="md-nav__link">
        OVS packet recirculation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/ovs-vxlan-tunnels-and-dscp/" class="md-nav__link">
        OVS VXLAN tunnels and DSCP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/ovs_with_gdb/" class="md-nav__link">
        OVS with GDB
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/packet-tracing-with-ovn/" class="md-nav__link">
        Packet tracing with OVN
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/sctp/" class="md-nav__link">
        SCTP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/useful-commands/" class="md-nav__link">
        Useful commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/wireguard/" class="md-nav__link">
        Wireguard
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">OpenShift and Kubernetes</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          OpenShift and Kubernetes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../alertmanager/" class="md-nav__link">
        AlertManager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../analyzing-cni/" class="md-nav__link">
        Analyzing CNI calls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ocp-custom-release-image/" class="md-nav__link">
        Building custom release images for OpenShift
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cpu-manager-with-custom-machine-config-pool/" class="md-nav__link">
        CPU manager with custom MachineConfigPool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../crio-conmon-runc/" class="md-nav__link">
        Crio vs conmon vs runc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dedicated-service-monitors/" class="md-nav__link">
        DedicatedServiceMonitors in OpenShift Monitoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../etcd_perf/" class="md-nav__link">
        Etcd Performance tests
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../get-vs-list-api-calls/" class="md-nav__link">
        Get vs List API Calls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../openshift_httpbin_tshark_sidecar/" class="md-nav__link">
        Httpbin tshark sidecar container
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kubernetes_cluster/" class="md-nav__link">
        Hints for installing kubernetes on Fedora
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../HPA/" class="md-nav__link">
        Horizontal Pod Autoscaler
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../how_rhcos_updates_work/" class="md-nav__link">
        How RHCOS updates work
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kubelet-filesystems/" class="md-nav__link">
        How kubelet monitors filesystems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ocp4-infra-nodes-with-machineset-without-worker-label/" class="md-nav__link">
        Infra nodes with MachineSets without worker label
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Ingress Controller Sharding OCP on OSP
      </a>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ingress-controller-sharding-on-separate-vip/" class="md-nav__link">
        Ingress Controller Sharding on separate VIP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../openshift_mirror_registry/" class="md-nav__link">
        Installing a cluster with a mirror registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../istio-1.6-on-ocp.4.x/" class="md-nav__link">
        Istio 1.6 on OpenShift 4.x
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kata/" class="md-nav__link">
        kata containers and the kata operatora
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kernel-ml-on-openshift/" class="md-nav__link">
        kernel-ml on OpenShift
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ovn-kind-hybrid-overlay/" class="md-nav__link">
        Kind with OVN Kubernetes Hybrid Overlay
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kind-with-private-registry/" class="md-nav__link">
        Kind with private registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../list_docker_registry_containers/" class="md-nav__link">
        List container images in registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mounting-container-image/" class="md-nav__link">
        Mount a container image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../openstack/install_openshift_on_openstack/" class="md-nav__link">
        OpenShift on OpenStack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../patch-service-loadbalancer-ingress-ip/" class="md-nav__link">
        Patch status.loadBalancer.ingress IP manually
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../private-registry/" class="md-nav__link">
        Private container registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../proxy-ocp-4.5/" class="md-nav__link">
        Proxy OCP 4.5
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpm-ostree-failed-to-find-image/" class="md-nav__link">
        rpm-ostreed failed to find image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../seccomp-defaults-ocp/" class="md-nav__link">
        Seccomp defaults in Red Hat OpenShift Container Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scc/" class="md-nav__link">
        Security Context Constraints (SCC)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../openshift-scc-with-mutating-webhooks/" class="md-nav__link">
        SCCs and mutating webhooks - a lesson learned
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fix-selinux-labels-coreos/" class="md-nav__link">
        SElinux labels fix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/sctp/" class="md-nav__link">
        SCTP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../openshift_troubleshooting_etcd_state/" class="md-nav__link">
        Troubleshooting etcd state
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../useful-ocp-commands/" class="md-nav__link">
        Useful commands for OpenShift
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../useful-ocp-sdn-commands/" class="md-nav__link">
        Useful commands for OpenShift SDN
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting_openshift_on_openstack_worker_creation/" class="md-nav__link">
        Troubleshooting OpenShift on OpenStack worker creation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../openstack/">OpenStack</a>
          
            <label for="__nav_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          OpenStack
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../openstack/reattach_to_running_deployment/" class="md-nav__link">
        Reattach to running deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../openstack/using_clouds_yaml/" class="md-nav__link">
        Using clouds.yaml
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../coding/">Coding</a>
          
            <label for="__nav_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Coding
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/operator-sdk-reconciliation/" class="md-nav__link">
        Controller Reconciliation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/vimrc/" class="md-nav__link">
        My vimrc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/golang-ip-conversion/" class="md-nav__link">
        Golang IP address conversion
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
        </div>
      </div>
    </div>
  
  
    
    <!--
    <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner">
          

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
</nav>
        </div>
      </div>
    </div>
    -->
  

          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="ingress-controller-sharding-for-openshfit-on-openstack-with-octavia">Ingress Controller sharding for OpenShfit on OpenStack with Octavia</h1>
<p>How to configure IngressController router sharding with OpenShift 4.x on top of OpenStack Platform 13 and Octavia and default HostNetwork endpointPublishingStrategy</p>
<h2 id="preface">Preface</h2>
<p>The official documentation describes how to configure router sharding:
<a href="https://docs.openshift.com/container-platform/4.3/networking/configuring_ingress_cluster_traffic/configuring-ingress-cluster-traffic-ingress-controller.html#nw-ingress-sharding-namespace-labels_configuring-ingress-cluster-traffic-ingress-controller">https://docs.openshift.com/container-platform/4.3/networking/configuring_ingress_cluster_traffic/configuring-ingress-cluster-traffic-ingress-controller.html#nw-ingress-sharding-namespace-labels_configuring-ingress-cluster-traffic-ingress-controller</a></p>
<p>However, the default <code class="highlight">endpointPublishingStrategy</code> is <code class="highlight">HostNetwork</code> and by default, OpenShift configures only a single VIP for installations in OpenStack. It is possible to configure Kuryr (supported) or Octavia loadbalancers (unsupported, see <a href="https://access.redhat.com/solutions/4722521">https://access.redhat.com/solutions/4722521</a>). In that case, the IngressController's endpoint publishing strategy needs to be set to <code class="highlight">LoadBalancerService</code>:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">endpointPublishingStrategy</span><span class="o">:</span>
<span class="w">    </span><span class="n">type</span><span class="o">:</span><span class="w"> </span><span class="n">LoadBalancerService</span>
</code></pre></div></td></tr></table></div></p>
<p>But it is also possible to keep the default <code class="highlight">endpointPublishingStrategy</code>as <code class="highlight">HostNetwork</code> and configure additional load balancers. This is a similar approach as chosen for vSphere deployments: <a href="https://docs.openshift.com/container-platform/4.3/installing/installing_vsphere/installing-vsphere.html">https://docs.openshift.com/container-platform/4.3/installing/installing_vsphere/installing-vsphere.html</a></p>
<p>The following examples use 3 namespaces, <code class="highlight">default</code>, <code class="highlight">test1</code>, <code class="highlight">test2</code>. Each namespace will be served by one IngressController. The environment hosts 3 worker nodes. Due to limitations of the <code class="highlight">HostNetwork</code> strategy, each worker node can host exactly one IngressController's router instance. Meaning that the replica count for each controller needs to be set to 1 in an environment with 3 worker nodes.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Make sure that the environment was configured with Octavia.</p>
<h2 id="configuring-test-projects-and-the-default-project-ingresscontrollers">Configuring test projects and the default project IngressControllers</h2>
<p>Create 2 new projects and label them:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nx">Each</span><span class="w"> </span><span class="nx">ingresscontroller</span><span class="w"> </span><span class="nx">runs</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nx">replica</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">this</span><span class="w"> </span><span class="nx">works</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="nx">workers</span>

<span class="err">#</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">ingress</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="nx">ns</span><span class="p">:</span>
<span class="err">#</span><span class="w">     </span><span class="nx">oc</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">ns</span><span class="w"> </span><span class="o">-</span><span class="nx">l</span><span class="w"> </span><span class="k">type</span><span class="o">!=</span><span class="nx">test1</span><span class="p">,</span><span class="k">type</span><span class="o">!=</span><span class="nx">test2</span>
<span class="err">#</span><span class="w"> </span><span class="nx">test1</span><span class="w"> </span><span class="nx">ingress</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="k">match</span>
<span class="err">#</span><span class="w">     </span><span class="nx">oc</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">ns</span><span class="w"> </span><span class="o">-</span><span class="nx">l</span><span class="w"> </span><span class="k">type</span><span class="p">=</span><span class="nx">test1</span>
<span class="err">#</span><span class="w"> </span><span class="nx">test2</span><span class="w"> </span><span class="nx">ingress</span><span class="w"> </span><span class="nx">will</span><span class="w"> </span><span class="k">match</span>
<span class="err">#</span><span class="w">     </span><span class="nx">oc</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">ns</span><span class="w"> </span><span class="o">-</span><span class="nx">l</span><span class="w"> </span><span class="k">type</span><span class="p">=</span><span class="nx">test2</span>

<span class="nx">oc</span><span class="w"> </span><span class="nx">new</span><span class="o">-</span><span class="nx">project</span><span class="w"> </span><span class="nx">test1</span>
<span class="nx">oc</span><span class="w"> </span><span class="nx">new</span><span class="o">-</span><span class="nx">project</span><span class="w"> </span><span class="nx">test2</span>
<span class="nx">oc</span><span class="w"> </span><span class="nx">label</span><span class="w"> </span><span class="kn">namespace</span><span class="w"> </span><span class="nx">test1</span><span class="w"> </span><span class="s">&quot;type=test1&quot;</span>
<span class="nx">oc</span><span class="w"> </span><span class="nx">label</span><span class="w"> </span><span class="kn">namespace</span><span class="w"> </span><span class="nx">test2</span><span class="w"> </span><span class="s">&quot;type=test2&quot;</span>
</code></pre></div></td></tr></table></div></p>
<p>Create a label on each worker node to pin IngressController routers to a particular node:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>oc label node cluster-7n7w9-worker-zpq85 &quot;ingressoperator=default&quot;
oc label node cluster-7n7w9-worker-zpq84 &quot;ingressoperator=test1&quot;
oc label node cluster-7n7w9-worker-zpq83 &quot;ingressoperator=test2&quot;
</code></pre></div></td></tr></table></div></p>
<h2 id="configuring-ingresscontrollers">Configuring IngressControllers</h2>
<p>Now, patch the default IngressController to force node selection and to make sure that it will not serve namespaces test1 and test2:</p>
<p><code class="highlight">operator-default-patch.yaml</code>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">replicas</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="n">namespaceSelector</span><span class="o">:</span>
<span class="w">    </span><span class="n">matchExpressions</span><span class="o">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">key</span><span class="o">:</span><span class="w"> </span><span class="n">type</span>
<span class="w">      </span><span class="n">operator</span><span class="o">:</span><span class="w"> </span><span class="n">NotIn</span>
<span class="w">      </span><span class="n">values</span><span class="o">:</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="n">test1</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="n">test2</span>
<span class="w">  </span><span class="n">nodePlacement</span><span class="o">:</span>
<span class="w">    </span><span class="n">nodeSelector</span><span class="o">:</span>
<span class="w">      </span><span class="n">matchLabels</span><span class="o">:</span>
<span class="w">        </span><span class="n">ingressoperator</span><span class="o">:</span><span class="w"> </span><span class="k">default</span>
</code></pre></div></td></tr></table></div></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nx">oc</span><span class="w"> </span><span class="nx">project</span><span class="w"> </span><span class="k">default</span>
<span class="nx">oc</span><span class="w"> </span><span class="nx">patch</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">ingress</span><span class="o">-</span><span class="nx">operator</span><span class="w"> </span><span class="nx">ingresscontroller</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="o">--</span><span class="k">type</span><span class="p">=</span><span class="s">&quot;merge&quot;</span><span class="w"> </span><span class="o">-</span><span class="nx">p</span><span class="w"> </span><span class="s">&quot;$(cat operator-default-patch.yaml)&quot;</span>
</code></pre></div></td></tr></table></div>
<p>Now, create IngressOperators for namespaces test1 and test2:</p>
<p><code class="highlight">operator-test1.yaml</code>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">v1</span>
<span class="n">items</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">operator</span><span class="o">.</span><span class="na">openshift</span><span class="o">.</span><span class="na">io</span><span class="o">/</span><span class="n">v1</span>
<span class="w">  </span><span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">IngressController</span>
<span class="w">  </span><span class="n">metadata</span><span class="o">:</span>
<span class="w">    </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">test1</span><span class="o">-</span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span>
<span class="w">    </span><span class="kd">namespace</span><span class="o">:</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">ingress</span><span class="o">-</span><span class="n">operator</span>
<span class="w">  </span><span class="n">spec</span><span class="o">:</span>
<span class="w">    </span><span class="n">replicas</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">domain</span><span class="o">:</span><span class="w"> </span><span class="n">test1</span><span class="o">.</span><span class="na">cluster</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">com</span>
<span class="w">    </span><span class="n">nodePlacement</span><span class="o">:</span>
<span class="w">      </span><span class="n">nodeSelector</span><span class="o">:</span>
<span class="w">        </span><span class="n">matchLabels</span><span class="o">:</span>
<span class="w">          </span><span class="n">node</span><span class="o">-</span><span class="n">role</span><span class="o">.</span><span class="na">kubernetes</span><span class="o">.</span><span class="na">io</span><span class="o">/</span><span class="n">worker</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">          </span><span class="n">ingressoperator</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;test1&quot;</span>
<span class="w">    </span><span class="n">namespaceSelector</span><span class="o">:</span>
<span class="w">      </span><span class="n">matchLabels</span><span class="o">:</span>
<span class="w">        </span><span class="n">type</span><span class="o">:</span><span class="w"> </span><span class="n">test1</span>
<span class="w">    </span><span class="n">endpointPublishingStrategy</span><span class="o">:</span>
<span class="w">      </span><span class="n">type</span><span class="o">:</span><span class="w"> </span><span class="n">HostNetwork</span>
<span class="w">      </span><span class="err">#</span><span class="n">type</span><span class="o">:</span><span class="w"> </span><span class="n">LoadBalancerService</span>
<span class="w">  </span><span class="n">status</span><span class="o">:</span><span class="w"> </span><span class="o">{}</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">List</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">resourceVersion</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">  </span><span class="n">selfLink</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
</code></pre></div></td></tr></table></div></p>
<p><code class="highlight">operator-test2.yaml</code>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">v1</span>
<span class="n">items</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">operator</span><span class="o">.</span><span class="na">openshift</span><span class="o">.</span><span class="na">io</span><span class="o">/</span><span class="n">v1</span>
<span class="w">  </span><span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">IngressController</span>
<span class="w">  </span><span class="n">metadata</span><span class="o">:</span>
<span class="w">    </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">test2</span><span class="o">-</span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span>
<span class="w">    </span><span class="kd">namespace</span><span class="o">:</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">ingress</span><span class="o">-</span><span class="n">operator</span>
<span class="w">  </span><span class="n">spec</span><span class="o">:</span>
<span class="w">    </span><span class="n">replicas</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">domain</span><span class="o">:</span><span class="w"> </span><span class="n">test2</span><span class="o">.</span><span class="na">cluster</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">com</span>
<span class="w">    </span><span class="n">nodePlacement</span><span class="o">:</span>
<span class="w">      </span><span class="n">nodeSelector</span><span class="o">:</span>
<span class="w">        </span><span class="n">matchLabels</span><span class="o">:</span>
<span class="w">          </span><span class="n">node</span><span class="o">-</span><span class="n">role</span><span class="o">.</span><span class="na">kubernetes</span><span class="o">.</span><span class="na">io</span><span class="o">/</span><span class="n">worker</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">          </span><span class="n">ingressoperator</span><span class="o">:</span><span class="w"> </span><span class="n">test2</span>
<span class="w">    </span><span class="n">namespaceSelector</span><span class="o">:</span>
<span class="w">      </span><span class="n">matchLabels</span><span class="o">:</span>
<span class="w">        </span><span class="n">type</span><span class="o">:</span><span class="w"> </span><span class="n">test2</span>
<span class="w">  </span><span class="n">status</span><span class="o">:</span><span class="w"> </span><span class="o">{}</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">List</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">resourceVersion</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">  </span><span class="n">selfLink</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
</code></pre></div></td></tr></table></div></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>oc project test1
oc apply -f operator-test1.yaml
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>oc project test2
oc apply -f operator-test2.yaml
</code></pre></div></td></tr></table></div>
<p>Note that at this point, the default IngressController routing will be broken. OCP on OSP runs a keepalived service which can be on either of the worker nodes.
Only one of the 3 IngressControllers will be served at this moment. We will change this in a moment.</p>
<h2 id="creating-test-builds-and-services">Creating test builds and services</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code>oc project default
oc apply -f fh-build.yaml
oc start-build fh-build --follow
oc apply -f fh-ingress.yaml

oc project test1
oc adm policy add-scc-to-user anyuid -z default
oc apply -f fh-test1-build.yaml
oc start-build fh-test1-build --follow
oc apply -f fh-test1-ingress.yaml

oc project test2
oc adm policy add-scc-to-user anyuid -z default
oc apply -f fh-test2-build.yaml
oc start-build fh-test2-build --follow
oc apply -f fh-test2-ingress.yaml
</code></pre></div></td></tr></table></div>
<p><code class="highlight">fh-build.yaml</code>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="na">openshift</span><span class="o">.</span><span class="na">io</span><span class="o">/</span><span class="n">v1</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">ImageStream</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">creationTimestamp</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span>
<span class="w">  </span><span class="n">generation</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span>
<span class="w">  </span><span class="n">selfLink</span><span class="o">:</span><span class="w"> </span><span class="sr">/apis/image.openshift.io/v1/namespaces/default/imagestreams/</span><span class="n">fh</span>
<span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">lookupPolicy</span><span class="o">:</span>
<span class="w">    </span><span class="n">local</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="n">status</span><span class="o">:</span>
<span class="w">  </span><span class="n">dockerImageRepository</span><span class="o">:</span><span class="w"> </span><span class="n">docker</span><span class="o">-</span><span class="n">registry</span><span class="o">.</span><span class="na">default</span><span class="o">.</span><span class="na">svc</span><span class="o">:</span><span class="mi">5000</span><span class="o">/</span><span class="n">fh</span>
<span class="o">---</span>
<span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">v1</span>
<span class="n">data</span><span class="o">:</span>
<span class="w">  </span><span class="n">run</span><span class="o">-</span><span class="n">apache</span><span class="o">.</span><span class="na">sh</span><span class="o">:</span><span class="w"> </span><span class="o">|</span>
<span class="w">    </span><span class="err">#</span><span class="o">!/</span><span class="n">bin</span><span class="o">/</span><span class="n">bash</span>

<span class="w">    </span><span class="sr">/usr/sbin/</span><span class="n">httpd</span><span class="w"> </span><span class="n">$OPTIONS</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">ConfigMap</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">creationTimestamp</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">run</span><span class="o">-</span><span class="n">apache</span>
<span class="w">  </span><span class="n">selfLink</span><span class="o">:</span><span class="w"> </span><span class="sr">/api/v1/namespaces/default/configmaps/</span><span class="n">run</span><span class="o">-</span><span class="n">apache</span>
<span class="o">---</span>
<span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">v1</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">BuildConfig</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">build</span>
<span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">source</span><span class="o">:</span>
<span class="w">    </span><span class="n">configMaps</span><span class="o">:</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="n">configMap</span><span class="o">:</span>
<span class="w">          </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">run</span><span class="o">-</span><span class="n">apache</span>
<span class="w">    </span><span class="n">dockerfile</span><span class="o">:</span><span class="w"> </span><span class="o">|</span>
<span class="w">       </span><span class="n">FROM</span><span class="w"> </span><span class="n">fedora</span>
<span class="w">       </span><span class="n">EXPOSE</span><span class="w"> </span><span class="mi">8080</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">y</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">tcpdump</span><span class="w"> </span><span class="o">-</span><span class="n">y</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">iproute</span><span class="w"> </span><span class="o">-</span><span class="n">y</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">procps</span><span class="o">-</span><span class="n">ng</span><span class="w"> </span><span class="o">-</span><span class="n">y</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s2">&quot;Apache default&quot;</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="sr">/var/www/html/i</span><span class="n">ndex</span><span class="o">.</span><span class="na">html</span>
<span class="w">       </span><span class="n">ADD</span><span class="w"> </span><span class="n">run</span><span class="o">-</span><span class="n">apache</span><span class="o">.</span><span class="na">sh</span><span class="w"> </span><span class="sr">/usr/share/httpd/</span><span class="n">run</span><span class="o">-</span><span class="n">apache</span><span class="o">.</span><span class="na">sh</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">chown</span><span class="w"> </span><span class="n">apache</span><span class="o">.</span><span class="w"> </span><span class="sr">/run/httpd/</span><span class="w"> </span><span class="o">-</span><span class="n">R</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">chmod</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">+</span><span class="n">rx</span><span class="w"> </span><span class="sr">/usr/share/httpd/</span><span class="n">run</span><span class="o">-</span><span class="n">apache</span><span class="o">.</span><span class="na">sh</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">chown</span><span class="w"> </span><span class="n">apache</span><span class="o">.</span><span class="w">  </span><span class="sr">/usr/share/httpd/</span><span class="n">run</span><span class="o">-</span><span class="n">apache</span><span class="o">.</span><span class="na">sh</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">usermod</span><span class="w"> </span><span class="n">apache</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="sr">/bin/</span><span class="n">bash</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">sed</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="s1">&#39;s/Listen 80/Listen 8080/&#39;</span><span class="w"> </span><span class="sr">/etc/httpd/conf/</span><span class="n">httpd</span><span class="o">.</span><span class="na">conf</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">chown</span><span class="w"> </span><span class="n">apache</span><span class="o">.</span><span class="w"> </span><span class="sr">/etc/httpd/logs/</span><span class="w"> </span><span class="o">-</span><span class="n">R</span>
<span class="w">       </span><span class="n">USER</span><span class="w"> </span><span class="n">apache</span>
<span class="w">       </span><span class="n">CMD</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;/usr/share/httpd/run-apache.sh&quot;</span><span class="o">]</span>
<span class="w">  </span><span class="n">strategy</span><span class="o">:</span>
<span class="w">    </span><span class="n">dockerStrategy</span><span class="o">:</span>
<span class="w">      </span><span class="n">noCache</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="n">output</span><span class="o">:</span>
<span class="w">    </span><span class="n">to</span><span class="o">:</span>
<span class="w">      </span><span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">ImageStreamTag</span>
<span class="w">      </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">:</span><span class="n">latest</span>
</code></pre></div></td></tr></table></div></p>
<p><code class="highlight">fh-ingress.yaml</code>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">extensions</span><span class="o">/</span><span class="n">v1beta1</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">Ingress</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fhingress</span><span class="o">-</span><span class="n">ingress</span>
<span class="w">  </span><span class="n">annotations</span><span class="o">:</span>
<span class="w">    </span><span class="n">kubernetes</span><span class="o">.</span><span class="na">io</span><span class="o">/</span><span class="n">ingress</span><span class="o">.</span><span class="na">allow</span><span class="o">-</span><span class="n">http</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;true&quot;</span>
<span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">rules</span><span class="o">:</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">host</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">.</span><span class="na">apps</span><span class="o">.</span><span class="na">cluster</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">com</span>
<span class="w">    </span><span class="n">http</span><span class="o">:</span>
<span class="w">      </span><span class="n">paths</span><span class="o">:</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="n">path</span><span class="o">:</span><span class="w"> </span><span class="o">/</span>
<span class="w">        </span><span class="n">backend</span><span class="o">:</span>
<span class="w">          </span><span class="n">serviceName</span><span class="o">:</span><span class="w"> </span><span class="n">fhingress</span><span class="o">-</span><span class="n">service</span>
<span class="w">          </span><span class="n">servicePort</span><span class="o">:</span><span class="w"> </span><span class="mi">80</span>
<span class="o">---</span>
<span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">v1</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">Service</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fhingress</span><span class="o">-</span><span class="n">service</span>
<span class="w">  </span><span class="n">labels</span><span class="o">:</span>
<span class="w">    </span><span class="n">app</span><span class="o">:</span><span class="w"> </span><span class="n">fhingress</span><span class="o">-</span><span class="n">deploymentconfig</span>
<span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">selector</span><span class="o">:</span>
<span class="w">    </span><span class="n">app</span><span class="o">:</span><span class="w"> </span><span class="n">fhingress</span><span class="o">-</span><span class="n">pod</span>
<span class="w">  </span><span class="n">ports</span><span class="o">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">protocol</span><span class="o">:</span><span class="w"> </span><span class="n">TCP</span>
<span class="w">      </span><span class="n">port</span><span class="o">:</span><span class="w"> </span><span class="mi">80</span>
<span class="w">      </span><span class="n">targetPort</span><span class="o">:</span><span class="w"> </span><span class="mi">8080</span>
<span class="o">---</span>
<span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">apps</span><span class="o">/</span><span class="n">v1</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">Deployment</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fhingress</span><span class="o">-</span><span class="n">deployment</span>
<span class="w">  </span><span class="n">labels</span><span class="o">:</span>
<span class="w">    </span><span class="n">app</span><span class="o">:</span><span class="w"> </span><span class="n">fhingress</span><span class="o">-</span><span class="n">deployment</span>
<span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">replicas</span><span class="o">:</span><span class="w"> </span><span class="mi">3</span>
<span class="w">  </span><span class="n">selector</span><span class="o">:</span>
<span class="w">    </span><span class="n">matchLabels</span><span class="o">:</span>
<span class="w">      </span><span class="n">app</span><span class="o">:</span><span class="w"> </span><span class="n">fhingress</span><span class="o">-</span><span class="n">pod</span>
<span class="w">  </span><span class="n">template</span><span class="o">:</span>
<span class="w">    </span><span class="n">metadata</span><span class="o">:</span>
<span class="w">      </span><span class="n">labels</span><span class="o">:</span>
<span class="w">        </span><span class="n">app</span><span class="o">:</span><span class="w"> </span><span class="n">fhingress</span><span class="o">-</span><span class="n">pod</span>
<span class="w">    </span><span class="n">spec</span><span class="o">:</span>
<span class="w">      </span><span class="n">containers</span><span class="o">:</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fhingress</span>
<span class="w">        </span><span class="n">image</span><span class="o">:</span><span class="w"> </span><span class="n">image</span><span class="o">-</span><span class="n">registry</span><span class="o">.</span><span class="na">openshift</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">registry</span><span class="o">.</span><span class="na">svc</span><span class="o">:</span><span class="mi">5000</span><span class="sr">/default/</span><span class="n">fh</span>
<span class="w">        </span><span class="n">imagePullPolicy</span><span class="o">:</span><span class="w"> </span><span class="n">Always</span>
</code></pre></div></td></tr></table></div></p>
<p><code class="highlight">fh-test1-build.yaml</code>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="na">openshift</span><span class="o">.</span><span class="na">io</span><span class="o">/</span><span class="n">v1</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">ImageStream</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">creationTimestamp</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span>
<span class="w">  </span><span class="n">generation</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test1</span>
<span class="w">  </span><span class="n">selfLink</span><span class="o">:</span><span class="w"> </span><span class="sr">/apis/image.openshift.io/v1/namespaces/default/imagestreams/</span><span class="n">fh</span><span class="o">-</span><span class="n">test1</span>
<span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">lookupPolicy</span><span class="o">:</span>
<span class="w">    </span><span class="n">local</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="n">status</span><span class="o">:</span>
<span class="w">  </span><span class="n">dockerImageRepository</span><span class="o">:</span><span class="w"> </span><span class="n">docker</span><span class="o">-</span><span class="n">registry</span><span class="o">.</span><span class="na">default</span><span class="o">.</span><span class="na">svc</span><span class="o">:</span><span class="mi">5000</span><span class="o">/</span><span class="n">fh</span><span class="o">-</span><span class="n">test1</span>
<span class="o">---</span>
<span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">v1</span>
<span class="n">data</span><span class="o">:</span>
<span class="w">  </span><span class="n">run</span><span class="o">-</span><span class="n">apache</span><span class="o">.</span><span class="na">sh</span><span class="o">:</span><span class="w"> </span><span class="o">|</span>
<span class="w">    </span><span class="err">#</span><span class="o">!/</span><span class="n">bin</span><span class="o">/</span><span class="n">bash</span>

<span class="w">    </span><span class="sr">/usr/sbin/</span><span class="n">httpd</span><span class="w"> </span><span class="n">$OPTIONS</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">ConfigMap</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">creationTimestamp</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">run</span><span class="o">-</span><span class="n">apache</span>
<span class="w">  </span><span class="n">selfLink</span><span class="o">:</span><span class="w"> </span><span class="sr">/api/v1/namespaces/default/configmaps/</span><span class="n">run</span><span class="o">-</span><span class="n">apache</span>
<span class="o">---</span>
<span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">v1</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">BuildConfig</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test1</span><span class="o">-</span><span class="n">build</span>
<span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">source</span><span class="o">:</span>
<span class="w">    </span><span class="n">configMaps</span><span class="o">:</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="n">configMap</span><span class="o">:</span>
<span class="w">          </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">run</span><span class="o">-</span><span class="n">apache</span>
<span class="w">    </span><span class="n">dockerfile</span><span class="o">:</span><span class="w"> </span><span class="o">|</span>
<span class="w">       </span><span class="n">FROM</span><span class="w"> </span><span class="n">fedora</span>
<span class="w">       </span><span class="n">EXPOSE</span><span class="w"> </span><span class="mi">8080</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">y</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">tcpdump</span><span class="w"> </span><span class="o">-</span><span class="n">y</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">iproute</span><span class="w"> </span><span class="o">-</span><span class="n">y</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">procps</span><span class="o">-</span><span class="n">ng</span><span class="w"> </span><span class="o">-</span><span class="n">y</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s2">&quot;Apache test1&quot;</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="sr">/var/www/html/i</span><span class="n">ndex</span><span class="o">.</span><span class="na">html</span>
<span class="w">       </span><span class="n">ADD</span><span class="w"> </span><span class="n">run</span><span class="o">-</span><span class="n">apache</span><span class="o">.</span><span class="na">sh</span><span class="w"> </span><span class="sr">/usr/share/httpd/</span><span class="n">run</span><span class="o">-</span><span class="n">apache</span><span class="o">.</span><span class="na">sh</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">chown</span><span class="w"> </span><span class="n">apache</span><span class="o">.</span><span class="w"> </span><span class="sr">/run/httpd/</span><span class="w"> </span><span class="o">-</span><span class="n">R</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">chmod</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">+</span><span class="n">rx</span><span class="w"> </span><span class="sr">/usr/share/httpd/</span><span class="n">run</span><span class="o">-</span><span class="n">apache</span><span class="o">.</span><span class="na">sh</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">chown</span><span class="w"> </span><span class="n">apache</span><span class="o">.</span><span class="w">  </span><span class="sr">/usr/share/httpd/</span><span class="n">run</span><span class="o">-</span><span class="n">apache</span><span class="o">.</span><span class="na">sh</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">usermod</span><span class="w"> </span><span class="n">apache</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="sr">/bin/</span><span class="n">bash</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">sed</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="s1">&#39;s/Listen 80/Listen 8080/&#39;</span><span class="w"> </span><span class="sr">/etc/httpd/conf/</span><span class="n">httpd</span><span class="o">.</span><span class="na">conf</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">chown</span><span class="w"> </span><span class="n">apache</span><span class="o">.</span><span class="w"> </span><span class="sr">/etc/httpd/logs/</span><span class="w"> </span><span class="o">-</span><span class="n">R</span>
<span class="w">       </span><span class="n">USER</span><span class="w"> </span><span class="n">apache</span>
<span class="w">       </span><span class="n">CMD</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;/usr/share/httpd/run-apache.sh&quot;</span><span class="o">]</span>
<span class="w">  </span><span class="n">strategy</span><span class="o">:</span>
<span class="w">    </span><span class="n">dockerStrategy</span><span class="o">:</span>
<span class="w">      </span><span class="n">noCache</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="n">output</span><span class="o">:</span>
<span class="w">    </span><span class="n">to</span><span class="o">:</span>
<span class="w">      </span><span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">ImageStreamTag</span>
<span class="w">      </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test1</span><span class="o">:</span><span class="n">latest</span>
</code></pre></div></td></tr></table></div></p>
<p><code class="highlight">fh-test1-ingress.yaml</code>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">extensions</span><span class="o">/</span><span class="n">v1beta1</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">Ingress</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test1ingress</span><span class="o">-</span><span class="n">ingress</span>
<span class="w">  </span><span class="n">annotations</span><span class="o">:</span>
<span class="w">    </span><span class="n">kubernetes</span><span class="o">.</span><span class="na">io</span><span class="o">/</span><span class="n">ingress</span><span class="o">.</span><span class="na">allow</span><span class="o">-</span><span class="n">http</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;true&quot;</span>
<span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">rules</span><span class="o">:</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">host</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">.</span><span class="na">test1</span><span class="o">.</span><span class="na">cluster</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">com</span>
<span class="w">    </span><span class="n">http</span><span class="o">:</span>
<span class="w">      </span><span class="n">paths</span><span class="o">:</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="n">path</span><span class="o">:</span><span class="w"> </span><span class="o">/</span>
<span class="w">        </span><span class="n">backend</span><span class="o">:</span>
<span class="w">          </span><span class="n">serviceName</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test1ingress</span><span class="o">-</span><span class="n">service</span>
<span class="w">          </span><span class="n">servicePort</span><span class="o">:</span><span class="w"> </span><span class="mi">80</span>
<span class="o">---</span>
<span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">v1</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">Service</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test1ingress</span><span class="o">-</span><span class="n">service</span>
<span class="w">  </span><span class="n">labels</span><span class="o">:</span>
<span class="w">    </span><span class="n">app</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test1ingress</span><span class="o">-</span><span class="n">deploymentconfig</span>
<span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">selector</span><span class="o">:</span>
<span class="w">    </span><span class="n">app</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test1ingress</span><span class="o">-</span><span class="n">pod</span>
<span class="w">  </span><span class="n">ports</span><span class="o">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">protocol</span><span class="o">:</span><span class="w"> </span><span class="n">TCP</span>
<span class="w">      </span><span class="n">port</span><span class="o">:</span><span class="w"> </span><span class="mi">80</span>
<span class="w">      </span><span class="n">targetPort</span><span class="o">:</span><span class="w"> </span><span class="mi">8080</span>
<span class="o">---</span>
<span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">apps</span><span class="o">/</span><span class="n">v1</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">Deployment</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test1ingress</span><span class="o">-</span><span class="n">deployment</span>
<span class="w">  </span><span class="n">labels</span><span class="o">:</span>
<span class="w">    </span><span class="n">app</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test1ingress</span><span class="o">-</span><span class="n">deployment</span>
<span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">replicas</span><span class="o">:</span><span class="w"> </span><span class="mi">3</span>
<span class="w">  </span><span class="n">selector</span><span class="o">:</span>
<span class="w">    </span><span class="n">matchLabels</span><span class="o">:</span>
<span class="w">      </span><span class="n">app</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test1ingress</span><span class="o">-</span><span class="n">pod</span>
<span class="w">  </span><span class="n">template</span><span class="o">:</span>
<span class="w">    </span><span class="n">metadata</span><span class="o">:</span>
<span class="w">      </span><span class="n">labels</span><span class="o">:</span>
<span class="w">        </span><span class="n">app</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test1ingress</span><span class="o">-</span><span class="n">pod</span>
<span class="w">    </span><span class="n">spec</span><span class="o">:</span>
<span class="w">      </span><span class="n">containers</span><span class="o">:</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test1ingress</span>
<span class="w">        </span><span class="n">image</span><span class="o">:</span><span class="w"> </span><span class="n">image</span><span class="o">-</span><span class="n">registry</span><span class="o">.</span><span class="na">openshift</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">registry</span><span class="o">.</span><span class="na">svc</span><span class="o">:</span><span class="mi">5000</span><span class="sr">/test1/</span><span class="n">fh</span><span class="o">-</span><span class="n">test1</span>
<span class="w">        </span><span class="n">imagePullPolicy</span><span class="o">:</span><span class="w"> </span><span class="n">Always</span>
</code></pre></div></td></tr></table></div></p>
<p><code class="highlight">fh-test2-build.yaml</code>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">image</span><span class="o">.</span><span class="na">openshift</span><span class="o">.</span><span class="na">io</span><span class="o">/</span><span class="n">v1</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">ImageStream</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">creationTimestamp</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span>
<span class="w">  </span><span class="n">generation</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test2</span>
<span class="w">  </span><span class="n">selfLink</span><span class="o">:</span><span class="w"> </span><span class="sr">/apis/image.openshift.io/v1/namespaces/default/imagestreams/</span><span class="n">fh</span><span class="o">-</span><span class="n">test2</span>
<span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">lookupPolicy</span><span class="o">:</span>
<span class="w">    </span><span class="n">local</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="n">status</span><span class="o">:</span>
<span class="w">  </span><span class="n">dockerImageRepository</span><span class="o">:</span><span class="w"> </span><span class="n">docker</span><span class="o">-</span><span class="n">registry</span><span class="o">.</span><span class="na">default</span><span class="o">.</span><span class="na">svc</span><span class="o">:</span><span class="mi">5000</span><span class="o">/</span><span class="n">fh</span><span class="o">-</span><span class="n">test2</span>
<span class="o">---</span>
<span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">v1</span>
<span class="n">data</span><span class="o">:</span>
<span class="w">  </span><span class="n">run</span><span class="o">-</span><span class="n">apache</span><span class="o">.</span><span class="na">sh</span><span class="o">:</span><span class="w"> </span><span class="o">|</span>
<span class="w">    </span><span class="err">#</span><span class="o">!/</span><span class="n">bin</span><span class="o">/</span><span class="n">bash</span>

<span class="w">    </span><span class="sr">/usr/sbin/</span><span class="n">httpd</span><span class="w"> </span><span class="n">$OPTIONS</span><span class="w"> </span><span class="o">-</span><span class="n">DFOREGROUND</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">ConfigMap</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">creationTimestamp</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">run</span><span class="o">-</span><span class="n">apache</span>
<span class="w">  </span><span class="n">selfLink</span><span class="o">:</span><span class="w"> </span><span class="sr">/api/v1/namespaces/default/configmaps/</span><span class="n">run</span><span class="o">-</span><span class="n">apache</span>
<span class="o">---</span>
<span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">v1</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">BuildConfig</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test2</span><span class="o">-</span><span class="n">build</span>
<span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">source</span><span class="o">:</span>
<span class="w">    </span><span class="n">configMaps</span><span class="o">:</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="n">configMap</span><span class="o">:</span>
<span class="w">          </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">run</span><span class="o">-</span><span class="n">apache</span>
<span class="w">    </span><span class="n">dockerfile</span><span class="o">:</span><span class="w"> </span><span class="o">|</span>
<span class="w">       </span><span class="n">FROM</span><span class="w"> </span><span class="n">fedora</span>
<span class="w">       </span><span class="n">EXPOSE</span><span class="w"> </span><span class="mi">8080</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">httpd</span><span class="w"> </span><span class="o">-</span><span class="n">y</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">tcpdump</span><span class="w"> </span><span class="o">-</span><span class="n">y</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">iproute</span><span class="w"> </span><span class="o">-</span><span class="n">y</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">yum</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">procps</span><span class="o">-</span><span class="n">ng</span><span class="w"> </span><span class="o">-</span><span class="n">y</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s2">&quot;Apache test2&quot;</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="sr">/var/www/html/i</span><span class="n">ndex</span><span class="o">.</span><span class="na">html</span>
<span class="w">       </span><span class="n">ADD</span><span class="w"> </span><span class="n">run</span><span class="o">-</span><span class="n">apache</span><span class="o">.</span><span class="na">sh</span><span class="w"> </span><span class="sr">/usr/share/httpd/</span><span class="n">run</span><span class="o">-</span><span class="n">apache</span><span class="o">.</span><span class="na">sh</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">chown</span><span class="w"> </span><span class="n">apache</span><span class="o">.</span><span class="w"> </span><span class="sr">/run/httpd/</span><span class="w"> </span><span class="o">-</span><span class="n">R</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">chmod</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="o">+</span><span class="n">rx</span><span class="w"> </span><span class="sr">/usr/share/httpd/</span><span class="n">run</span><span class="o">-</span><span class="n">apache</span><span class="o">.</span><span class="na">sh</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">chown</span><span class="w"> </span><span class="n">apache</span><span class="o">.</span><span class="w">  </span><span class="sr">/usr/share/httpd/</span><span class="n">run</span><span class="o">-</span><span class="n">apache</span><span class="o">.</span><span class="na">sh</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">usermod</span><span class="w"> </span><span class="n">apache</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="sr">/bin/</span><span class="n">bash</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">sed</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="s1">&#39;s/Listen 80/Listen 8080/&#39;</span><span class="w"> </span><span class="sr">/etc/httpd/conf/</span><span class="n">httpd</span><span class="o">.</span><span class="na">conf</span>
<span class="w">       </span><span class="n">RUN</span><span class="w"> </span><span class="n">chown</span><span class="w"> </span><span class="n">apache</span><span class="o">.</span><span class="w"> </span><span class="sr">/etc/httpd/logs/</span><span class="w"> </span><span class="o">-</span><span class="n">R</span>
<span class="w">       </span><span class="n">USER</span><span class="w"> </span><span class="n">apache</span>
<span class="w">       </span><span class="n">CMD</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;/usr/share/httpd/run-apache.sh&quot;</span><span class="o">]</span>
<span class="w">  </span><span class="n">strategy</span><span class="o">:</span>
<span class="w">    </span><span class="n">dockerStrategy</span><span class="o">:</span>
<span class="w">      </span><span class="n">noCache</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="n">output</span><span class="o">:</span>
<span class="w">    </span><span class="n">to</span><span class="o">:</span>
<span class="w">      </span><span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">ImageStreamTag</span>
<span class="w">      </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test2</span><span class="o">:</span><span class="n">latest</span>
</code></pre></div></td></tr></table></div></p>
<p><code class="highlight">fh-test2-ingress.yaml</code>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">extensions</span><span class="o">/</span><span class="n">v1beta1</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">Ingress</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test2ingress</span><span class="o">-</span><span class="n">ingress</span>
<span class="w">  </span><span class="n">annotations</span><span class="o">:</span>
<span class="w">    </span><span class="n">kubernetes</span><span class="o">.</span><span class="na">io</span><span class="o">/</span><span class="n">ingress</span><span class="o">.</span><span class="na">allow</span><span class="o">-</span><span class="n">http</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;true&quot;</span>
<span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">rules</span><span class="o">:</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">host</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">.</span><span class="na">test2</span><span class="o">.</span><span class="na">cluster</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">com</span>
<span class="w">    </span><span class="n">http</span><span class="o">:</span>
<span class="w">      </span><span class="n">paths</span><span class="o">:</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="n">path</span><span class="o">:</span><span class="w"> </span><span class="o">/</span>
<span class="w">        </span><span class="n">backend</span><span class="o">:</span>
<span class="w">          </span><span class="n">serviceName</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test2ingress</span><span class="o">-</span><span class="n">service</span>
<span class="w">          </span><span class="n">servicePort</span><span class="o">:</span><span class="w"> </span><span class="mi">80</span>
<span class="o">---</span>
<span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">v1</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">Service</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test2ingress</span><span class="o">-</span><span class="n">service</span>
<span class="w">  </span><span class="n">labels</span><span class="o">:</span>
<span class="w">    </span><span class="n">app</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test2ingress</span><span class="o">-</span><span class="n">deploymentconfig</span>
<span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">selector</span><span class="o">:</span>
<span class="w">    </span><span class="n">app</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test2ingress</span><span class="o">-</span><span class="n">pod</span>
<span class="w">  </span><span class="n">ports</span><span class="o">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">protocol</span><span class="o">:</span><span class="w"> </span><span class="n">TCP</span>
<span class="w">      </span><span class="n">port</span><span class="o">:</span><span class="w"> </span><span class="mi">80</span>
<span class="w">      </span><span class="n">targetPort</span><span class="o">:</span><span class="w"> </span><span class="mi">8080</span>
<span class="o">---</span>
<span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">apps</span><span class="o">/</span><span class="n">v1</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">Deployment</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test2ingress</span><span class="o">-</span><span class="n">deployment</span>
<span class="w">  </span><span class="n">labels</span><span class="o">:</span>
<span class="w">    </span><span class="n">app</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test2ingress</span><span class="o">-</span><span class="n">deployment</span>
<span class="n">spec</span><span class="o">:</span>
<span class="w">  </span><span class="n">replicas</span><span class="o">:</span><span class="w"> </span><span class="mi">3</span>
<span class="w">  </span><span class="n">selector</span><span class="o">:</span>
<span class="w">    </span><span class="n">matchLabels</span><span class="o">:</span>
<span class="w">      </span><span class="n">app</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test2ingress</span><span class="o">-</span><span class="n">pod</span>
<span class="w">  </span><span class="n">template</span><span class="o">:</span>
<span class="w">    </span><span class="n">metadata</span><span class="o">:</span>
<span class="w">      </span><span class="n">labels</span><span class="o">:</span>
<span class="w">        </span><span class="n">app</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test2ingress</span><span class="o">-</span><span class="n">pod</span>
<span class="w">    </span><span class="n">spec</span><span class="o">:</span>
<span class="w">      </span><span class="n">containers</span><span class="o">:</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">fh</span><span class="o">-</span><span class="n">test2ingress</span>
<span class="w">        </span><span class="n">image</span><span class="o">:</span><span class="w"> </span><span class="n">image</span><span class="o">-</span><span class="n">registry</span><span class="o">.</span><span class="na">openshift</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">registry</span><span class="o">.</span><span class="na">svc</span><span class="o">:</span><span class="mi">5000</span><span class="sr">/test2/</span><span class="n">fh</span><span class="o">-</span><span class="n">test2</span>
<span class="w">        </span><span class="n">imagePullPolicy</span><span class="o">:</span><span class="w"> </span><span class="n">Always</span>
</code></pre></div></td></tr></table></div></p>
<h2 id="configuring-octavia-loadbalancers-for-server-ingresscontrollers">Configuring Octavia loadbalancers for server IngressControllers</h2>
<p>Instead of using the default keepalived VIP, we are going to create one Octavia loadbalancer per IngressController:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">list</span>
<span class="o">+--------------------------------------+----------------------------+--------+--------------------------------------------------------------------------+---------------------+--------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">ID</span><span class="w">                                   </span><span class="o">|</span><span class="w"> </span><span class="n">Name</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="n">Status</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Networks</span><span class="w">                                                                 </span><span class="o">|</span><span class="w"> </span><span class="n">Image</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">Flavor</span><span class="w">       </span><span class="o">|</span>
<span class="o">+--------------------------------------+----------------------------+--------+--------------------------------------------------------------------------+---------------------+--------------+</span>
<span class="o">|</span><span class="w"> </span><span class="mf">2e5</span><span class="n">bc035</span><span class="o">-</span><span class="n">e6da</span><span class="o">-</span><span class="mi">4807</span><span class="o">-</span><span class="mi">8</span><span class="n">c96</span><span class="o">-</span><span class="mi">268</span><span class="n">c2587c759</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="n">fkv5p</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">openshift</span><span class="o">=</span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.45</span><span class="w">                                      </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">rhcos</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">m1</span><span class="o">.</span><span class="n">openshift</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mf">14406e18</span><span class="o">-</span><span class="mi">74</span><span class="n">bd</span><span class="o">-</span><span class="mi">4723</span><span class="o">-</span><span class="mi">81</span><span class="n">b1</span><span class="o">-</span><span class="n">ea38080d3e72</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="n">ggxds</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">openshift</span><span class="o">=</span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.13</span><span class="w">                                      </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">rhcos</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">m1</span><span class="o">.</span><span class="n">openshift</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">7</span><span class="n">ad9432b</span><span class="o">-</span><span class="n">bb4f</span><span class="o">-</span><span class="mi">4</span><span class="n">cc1</span><span class="o">-</span><span class="n">b842</span><span class="o">-</span><span class="mf">1e63</span><span class="n">a323a3b5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="n">zpq85</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">openshift</span><span class="o">=</span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.14</span><span class="w">                                      </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">rhcos</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">m1</span><span class="o">.</span><span class="n">openshift</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">dc4db4f7</span><span class="o">-</span><span class="n">d410</span><span class="o">-</span><span class="mi">4404</span><span class="o">-</span><span class="mi">9166</span><span class="o">-</span><span class="mi">66204931538</span><span class="n">c</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="k">master</span><span class="o">-</span><span class="mi">1</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">openshift</span><span class="o">=</span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.15</span><span class="w">                                      </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">rhcos</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">m1</span><span class="o">.</span><span class="n">openshift</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">e0e3a4cd</span><span class="o">-</span><span class="mi">4</span><span class="n">d1e</span><span class="o">-</span><span class="mi">4496</span><span class="o">-</span><span class="mf">9e59</span><span class="o">-</span><span class="n">ba8c0d62b54a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="k">master</span><span class="o">-</span><span class="mi">2</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">openshift</span><span class="o">=</span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.23</span><span class="w">                                      </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">rhcos</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">m1</span><span class="o">.</span><span class="n">openshift</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">1</span><span class="n">b76ade6</span><span class="o">-</span><span class="n">ad53</span><span class="o">-</span><span class="mi">43</span><span class="n">c8</span><span class="o">-</span><span class="mi">9</span><span class="n">f15</span><span class="o">-</span><span class="n">fd3d550e0a17</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="k">master</span><span class="o">-</span><span class="mi">0</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">openshift</span><span class="o">=</span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.39</span><span class="w">                                      </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">rhcos</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">m1</span><span class="o">.</span><span class="n">openshift</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">43810</span><span class="n">d22</span><span class="o">-</span><span class="mi">74</span><span class="n">ce</span><span class="o">-</span><span class="mi">4</span><span class="n">f5a</span><span class="o">-</span><span class="n">a615</span><span class="o">-</span><span class="n">d77d1628dde7</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">rhel</span><span class="o">-</span><span class="n">test1</span><span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">private1</span><span class="o">=</span><span class="mi">2000</span><span class="p">:</span><span class="mi">192</span><span class="p">:</span><span class="mi">168</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="n">f816</span><span class="p">:</span><span class="mi">3</span><span class="n">eff</span><span class="p">:</span><span class="n">fea4</span><span class="p">:</span><span class="mf">39e1</span><span class="p">,</span><span class="w"> </span><span class="mf">192.168</span><span class="o">.</span><span class="mf">0.108</span><span class="p">,</span><span class="w"> </span><span class="mf">172.16</span><span class="o">.</span><span class="mf">0.208</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">rhel</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="n">m1</span><span class="o">.</span><span class="n">small</span><span class="w">     </span><span class="o">|</span>
<span class="o">+--------------------------------------+----------------------------+--------+--------------------------------------------------------------------------+---------------------+--------------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">--</span><span class="n">all</span>
<span class="o">+--------------------------------------+----------------------------------------------+--------+--------------------------------------------------------------------------+----------------------------------------+--------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">ID</span><span class="w">                                   </span><span class="o">|</span><span class="w"> </span><span class="n">Name</span><span class="w">                                         </span><span class="o">|</span><span class="w"> </span><span class="n">Status</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Networks</span><span class="w">                                                                 </span><span class="o">|</span><span class="w"> </span><span class="n">Image</span><span class="w">                                  </span><span class="o">|</span><span class="w"> </span><span class="n">Flavor</span><span class="w">       </span><span class="o">|</span>
<span class="o">+--------------------------------------+----------------------------------------------+--------+--------------------------------------------------------------------------+----------------------------------------+--------------+</span>
<span class="o">|</span><span class="w"> </span><span class="mi">2</span><span class="n">bdd7c68</span><span class="o">-</span><span class="mi">2</span><span class="n">b00</span><span class="o">-</span><span class="mi">4824</span><span class="o">-</span><span class="mi">9</span><span class="n">ebe</span><span class="o">-</span><span class="mi">6</span><span class="n">cc3babdfe77</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">amphora</span><span class="o">-</span><span class="n">da1a5888</span><span class="o">-</span><span class="mi">1052</span><span class="o">-</span><span class="mi">4</span><span class="n">a6b</span><span class="o">-</span><span class="n">a05d</span><span class="o">-</span><span class="n">fc21c22a5cf5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">lb</span><span class="o">-</span><span class="n">mgmt</span><span class="o">-</span><span class="n">net</span><span class="o">=</span><span class="mf">172.24</span><span class="o">.</span><span class="mf">0.13</span><span class="p">;</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">openshift</span><span class="o">=</span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.20</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">octavia</span><span class="o">-</span><span class="n">amphora</span><span class="o">-</span><span class="mf">13.0</span><span class="o">-</span><span class="mf">20200323.2</span><span class="o">.</span><span class="n">x86_64</span><span class="w"> </span><span class="o">|</span><span class="w">              </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mf">2e5</span><span class="n">bc035</span><span class="o">-</span><span class="n">e6da</span><span class="o">-</span><span class="mi">4807</span><span class="o">-</span><span class="mi">8</span><span class="n">c96</span><span class="o">-</span><span class="mi">268</span><span class="n">c2587c759</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="n">fkv5p</span><span class="w">                   </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">openshift</span><span class="o">=</span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.45</span><span class="w">                                      </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">rhcos</span><span class="w">                    </span><span class="o">|</span><span class="w"> </span><span class="n">m1</span><span class="o">.</span><span class="n">openshift</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mf">14406e18</span><span class="o">-</span><span class="mi">74</span><span class="n">bd</span><span class="o">-</span><span class="mi">4723</span><span class="o">-</span><span class="mi">81</span><span class="n">b1</span><span class="o">-</span><span class="n">ea38080d3e72</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="n">ggxds</span><span class="w">                   </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">openshift</span><span class="o">=</span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.13</span><span class="w">                                      </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">rhcos</span><span class="w">                    </span><span class="o">|</span><span class="w"> </span><span class="n">m1</span><span class="o">.</span><span class="n">openshift</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">7</span><span class="n">ad9432b</span><span class="o">-</span><span class="n">bb4f</span><span class="o">-</span><span class="mi">4</span><span class="n">cc1</span><span class="o">-</span><span class="n">b842</span><span class="o">-</span><span class="mf">1e63</span><span class="n">a323a3b5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="n">zpq85</span><span class="w">                   </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">openshift</span><span class="o">=</span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.14</span><span class="w">                                      </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">rhcos</span><span class="w">                    </span><span class="o">|</span><span class="w"> </span><span class="n">m1</span><span class="o">.</span><span class="n">openshift</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">dc4db4f7</span><span class="o">-</span><span class="n">d410</span><span class="o">-</span><span class="mi">4404</span><span class="o">-</span><span class="mi">9166</span><span class="o">-</span><span class="mi">66204931538</span><span class="n">c</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="k">master</span><span class="o">-</span><span class="mi">1</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">openshift</span><span class="o">=</span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.15</span><span class="w">                                      </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">rhcos</span><span class="w">                    </span><span class="o">|</span><span class="w"> </span><span class="n">m1</span><span class="o">.</span><span class="n">openshift</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">e0e3a4cd</span><span class="o">-</span><span class="mi">4</span><span class="n">d1e</span><span class="o">-</span><span class="mi">4496</span><span class="o">-</span><span class="mf">9e59</span><span class="o">-</span><span class="n">ba8c0d62b54a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="k">master</span><span class="o">-</span><span class="mi">2</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">openshift</span><span class="o">=</span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.23</span><span class="w">                                      </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">rhcos</span><span class="w">                    </span><span class="o">|</span><span class="w"> </span><span class="n">m1</span><span class="o">.</span><span class="n">openshift</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">1</span><span class="n">b76ade6</span><span class="o">-</span><span class="n">ad53</span><span class="o">-</span><span class="mi">43</span><span class="n">c8</span><span class="o">-</span><span class="mi">9</span><span class="n">f15</span><span class="o">-</span><span class="n">fd3d550e0a17</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="k">master</span><span class="o">-</span><span class="mi">0</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">openshift</span><span class="o">=</span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.39</span><span class="w">                                      </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">rhcos</span><span class="w">                    </span><span class="o">|</span><span class="w"> </span><span class="n">m1</span><span class="o">.</span><span class="n">openshift</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">43810</span><span class="n">d22</span><span class="o">-</span><span class="mi">74</span><span class="n">ce</span><span class="o">-</span><span class="mi">4</span><span class="n">f5a</span><span class="o">-</span><span class="n">a615</span><span class="o">-</span><span class="n">d77d1628dde7</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">rhel</span><span class="o">-</span><span class="n">test1</span><span class="w">                                   </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">private1</span><span class="o">=</span><span class="mi">2000</span><span class="p">:</span><span class="mi">192</span><span class="p">:</span><span class="mi">168</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="n">f816</span><span class="p">:</span><span class="mi">3</span><span class="n">eff</span><span class="p">:</span><span class="n">fea4</span><span class="p">:</span><span class="mf">39e1</span><span class="p">,</span><span class="w"> </span><span class="mf">192.168</span><span class="o">.</span><span class="mf">0.108</span><span class="p">,</span><span class="w"> </span><span class="mf">172.16</span><span class="o">.</span><span class="mf">0.208</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">rhel</span><span class="w">                                   </span><span class="o">|</span><span class="w"> </span><span class="n">m1</span><span class="o">.</span><span class="n">small</span><span class="w">     </span><span class="o">|</span>
<span class="o">+--------------------------------------+----------------------------------------------+--------+--------------------------------------------------------------------------+----------------------------------------+--------------+</span>

<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w">  </span><span class="c1"># openstack loadbalancer create --name ingress-controller-default --vip-subnet-id </span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">subnet</span><span class="w"> </span><span class="n">list</span>
<span class="o">+--------------------------------------+---------------------------------------------------+--------------------------------------+----------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">ID</span><span class="w">                                   </span><span class="o">|</span><span class="w"> </span><span class="n">Name</span><span class="w">                                              </span><span class="o">|</span><span class="w"> </span><span class="n">Network</span><span class="w">                              </span><span class="o">|</span><span class="w"> </span><span class="n">Subnet</span><span class="w">               </span><span class="o">|</span>
<span class="o">+--------------------------------------+---------------------------------------------------+--------------------------------------+----------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="mi">14</span><span class="n">a3bd37</span><span class="o">-</span><span class="mi">7</span><span class="n">a3a</span><span class="o">-</span><span class="mi">4</span><span class="n">f14</span><span class="o">-</span><span class="n">bd03</span><span class="o">-</span><span class="mi">26</span><span class="n">d4860d91db</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">provider1</span><span class="o">-</span><span class="n">subnet</span><span class="w">                                  </span><span class="o">|</span><span class="w"> </span><span class="n">d14c0815</span><span class="o">-</span><span class="mi">22</span><span class="n">b5</span><span class="o">-</span><span class="mi">4</span><span class="n">cdf</span><span class="o">-</span><span class="mi">9</span><span class="n">db1</span><span class="o">-</span><span class="mi">5</span><span class="n">da7951f1e0a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.16</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span><span class="w">        </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">5</span><span class="n">aef701a</span><span class="o">-</span><span class="n">c93f</span><span class="o">-</span><span class="mi">4210</span><span class="o">-</span><span class="mi">8722</span><span class="o">-</span><span class="mi">3</span><span class="n">fdf8ef1ddf1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">provider1</span><span class="o">-</span><span class="n">ipv6</span><span class="o">-</span><span class="n">subnet</span><span class="w">                             </span><span class="o">|</span><span class="w"> </span><span class="n">d14c0815</span><span class="o">-</span><span class="mi">22</span><span class="n">b5</span><span class="o">-</span><span class="mi">4</span><span class="n">cdf</span><span class="o">-</span><span class="mi">9</span><span class="n">db1</span><span class="o">-</span><span class="mi">5</span><span class="n">da7951f1e0a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2000</span><span class="p">:</span><span class="mi">10</span><span class="p">::</span><span class="o">/</span><span class="mi">64</span><span class="w">         </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">63950</span><span class="n">c5e</span><span class="o">-</span><span class="n">fc70</span><span class="o">-</span><span class="mi">49</span><span class="n">ad</span><span class="o">-</span><span class="mi">8</span><span class="n">d6b</span><span class="o">-</span><span class="mi">092</span><span class="n">b8ba39016</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">nodes</span><span class="w">                               </span><span class="o">|</span><span class="w"> </span><span class="n">ac9c0bd9</span><span class="o">-</span><span class="mi">3793</span><span class="o">-</span><span class="mi">48</span><span class="n">d3</span><span class="o">-</span><span class="n">a12e</span><span class="o">-</span><span class="n">eaa06028a366</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">16</span><span class="w">        </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">7</span><span class="n">f65d115</span><span class="o">-</span><span class="mi">8077</span><span class="o">-</span><span class="mi">4219</span><span class="o">-</span><span class="mi">9</span><span class="n">ef8</span><span class="o">-</span><span class="mi">3</span><span class="n">b0820ba8b52</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">private1</span><span class="o">-</span><span class="n">ipv6</span><span class="o">-</span><span class="n">subnet</span><span class="w">                              </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="n">af094e6</span><span class="o">-</span><span class="mi">1</span><span class="n">dac</span><span class="o">-</span><span class="mi">4479</span><span class="o">-</span><span class="mi">9</span><span class="n">ebc</span><span class="o">-</span><span class="mi">88</span><span class="n">f8f7f0b254</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2000</span><span class="p">:</span><span class="mi">192</span><span class="p">:</span><span class="mi">168</span><span class="p">::</span><span class="o">/</span><span class="mi">64</span><span class="w">    </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">9</span><span class="n">fa85591</span><span class="o">-</span><span class="mi">718</span><span class="n">c</span><span class="o">-</span><span class="mi">4</span><span class="n">fb9</span><span class="o">-</span><span class="mi">88</span><span class="n">d8</span><span class="o">-</span><span class="mi">0</span><span class="n">c2e5b0771ee</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">private1</span><span class="o">-</span><span class="n">subnet</span><span class="w">                                   </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="n">af094e6</span><span class="o">-</span><span class="mi">1</span><span class="n">dac</span><span class="o">-</span><span class="mi">4479</span><span class="o">-</span><span class="mi">9</span><span class="n">ebc</span><span class="o">-</span><span class="mi">88</span><span class="n">f8f7f0b254</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">192.168</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span><span class="w">       </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">a0827588</span><span class="o">-</span><span class="mi">7460</span><span class="o">-</span><span class="mi">4</span><span class="n">f2f</span><span class="o">-</span><span class="mi">9</span><span class="n">f29</span><span class="o">-</span><span class="mi">12</span><span class="n">bb1be49c76</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">lb</span><span class="o">-</span><span class="n">mgmt</span><span class="o">-</span><span class="n">subnet</span><span class="w">                                    </span><span class="o">|</span><span class="w"> </span><span class="mi">85</span><span class="n">cd5be1</span><span class="o">-</span><span class="mi">3</span><span class="n">d8b</span><span class="o">-</span><span class="mi">4929</span><span class="o">-</span><span class="n">b9ac</span><span class="o">-</span><span class="mf">2e770</span><span class="n">cb12ba9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.24</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">16</span><span class="w">        </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">a5e9841d</span><span class="o">-</span><span class="mi">38</span><span class="n">a7</span><span class="o">-</span><span class="mi">47</span><span class="n">a0</span><span class="o">-</span><span class="mi">8</span><span class="n">db2</span><span class="o">-</span><span class="n">f302a67a9845</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">private2</span><span class="o">-</span><span class="n">subnet</span><span class="w">                                   </span><span class="o">|</span><span class="w"> </span><span class="n">fdb07e70</span><span class="o">-</span><span class="mi">7055</span><span class="o">-</span><span class="mi">41</span><span class="n">a9</span><span class="o">-</span><span class="n">a8fa</span><span class="o">-</span><span class="mi">10</span><span class="n">b2dce988b3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">24</span><span class="w">       </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">af925c70</span><span class="o">-</span><span class="mf">979e-4</span><span class="n">fa9</span><span class="o">-</span><span class="mi">8704</span><span class="o">-</span><span class="mi">72</span><span class="n">ec683a31f8</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">private</span><span class="o">-</span><span class="n">mgmt</span><span class="o">-</span><span class="n">ipv6</span><span class="o">-</span><span class="n">subnet</span><span class="w">                          </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="n">d74f260</span><span class="o">-</span><span class="n">c3d6</span><span class="o">-</span><span class="mi">4</span><span class="n">a77</span><span class="o">-</span><span class="mi">8881</span><span class="o">-</span><span class="mi">438</span><span class="n">c3bfaaa7b</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2000</span><span class="p">:</span><span class="mi">192</span><span class="p">:</span><span class="mi">168</span><span class="p">:</span><span class="mi">10</span><span class="p">::</span><span class="o">/</span><span class="mi">64</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">c815a934</span><span class="o">-</span><span class="mi">98</span><span class="n">ff</span><span class="o">-</span><span class="mi">4</span><span class="n">daa</span><span class="o">-</span><span class="mi">8</span><span class="n">b5e</span><span class="o">-</span><span class="mi">5</span><span class="n">a0e5d91806f</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">private2</span><span class="o">-</span><span class="n">ipv6</span><span class="o">-</span><span class="n">subnet</span><span class="w">                              </span><span class="o">|</span><span class="w"> </span><span class="n">fdb07e70</span><span class="o">-</span><span class="mi">7055</span><span class="o">-</span><span class="mi">41</span><span class="n">a9</span><span class="o">-</span><span class="n">a8fa</span><span class="o">-</span><span class="mi">10</span><span class="n">b2dce988b3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2000</span><span class="p">:</span><span class="mi">192</span><span class="p">:</span><span class="mi">168</span><span class="p">:</span><span class="mi">1</span><span class="p">::</span><span class="o">/</span><span class="mi">64</span><span class="w">  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">df05dd9e</span><span class="o">-</span><span class="mi">6583</span><span class="o">-</span><span class="mi">42</span><span class="n">a0</span><span class="o">-</span><span class="n">afee</span><span class="o">-</span><span class="n">e8f65d813e6f</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">private</span><span class="o">-</span><span class="n">mgmt</span><span class="o">-</span><span class="n">subnet</span><span class="w">                               </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="n">d74f260</span><span class="o">-</span><span class="n">c3d6</span><span class="o">-</span><span class="mi">4</span><span class="n">a77</span><span class="o">-</span><span class="mi">8881</span><span class="o">-</span><span class="mi">438</span><span class="n">c3bfaaa7b</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">192.168</span><span class="o">.</span><span class="mf">10.0</span><span class="o">/</span><span class="mi">24</span><span class="w">      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">e1ebbac2</span><span class="o">-</span><span class="mi">3</span><span class="n">d7c</span><span class="o">-</span><span class="mi">4355</span><span class="o">-</span><span class="mi">9624</span><span class="o">-</span><span class="n">f0920d705f76</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">HA</span><span class="w"> </span><span class="n">subnet</span><span class="w"> </span><span class="n">tenant</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">5079</span><span class="n">d963</span><span class="o">-</span><span class="mi">7301</span><span class="o">-</span><span class="mi">4218</span><span class="o">-</span><span class="mi">855</span><span class="n">b</span><span class="o">-</span><span class="n">f7d33fce1081</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">169.254</span><span class="o">.</span><span class="mf">192.0</span><span class="o">/</span><span class="mi">18</span><span class="w">     </span><span class="o">|</span>
<span class="o">+--------------------------------------+---------------------------------------------------+--------------------------------------+----------------------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="o">--</span><span class="n">name</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">default</span><span class="w"> </span><span class="o">--</span><span class="n">vip</span><span class="o">-</span><span class="n">subnet</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">nodes</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">admin_state_up</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">True</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">created_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">08</span><span class="n">T10</span><span class="p">:</span><span class="mi">27</span><span class="p">:</span><span class="mi">46</span><span class="w">                  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">description</span><span class="w">         </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">flavor</span><span class="w">              </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="n">e5feb42d</span><span class="o">-</span><span class="mf">77e4</span><span class="o">-</span><span class="mi">428</span><span class="n">b</span><span class="o">-</span><span class="mi">9</span><span class="n">ad0</span><span class="o">-</span><span class="mi">55</span><span class="n">fe6d30f3b3</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">listeners</span><span class="w">           </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">default</span><span class="w">           </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">operating_status</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">OFFLINE</span><span class="w">                              </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">pools</span><span class="w">               </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">provider</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">octavia</span><span class="w">                              </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">provisioning_status</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">PENDING_CREATE</span><span class="w">                       </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">updated_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">vip_address</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.21</span><span class="w">                          </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">vip_network_id</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">ac9c0bd9</span><span class="o">-</span><span class="mi">3793</span><span class="o">-</span><span class="mi">48</span><span class="n">d3</span><span class="o">-</span><span class="n">a12e</span><span class="o">-</span><span class="n">eaa06028a366</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">vip_port_id</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">f336d8c6</span><span class="o">-</span><span class="mi">8</span><span class="n">f47</span><span class="o">-</span><span class="mi">4</span><span class="n">d61</span><span class="o">-</span><span class="n">a865</span><span class="o">-</span><span class="mi">19</span><span class="n">f34a671ffa</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">vip_qos_policy_id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">vip_subnet_id</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">63950</span><span class="n">c5e</span><span class="o">-</span><span class="n">fc70</span><span class="o">-</span><span class="mi">49</span><span class="n">ad</span><span class="o">-</span><span class="mi">8</span><span class="n">d6b</span><span class="o">-</span><span class="mi">092</span><span class="n">b8ba39016</span><span class="w"> </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="o">--</span><span class="n">name</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test1</span><span class="w"> </span><span class="o">--</span><span class="n">vip</span><span class="o">-</span><span class="n">subnet</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">nodes</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">admin_state_up</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">True</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">created_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">08</span><span class="n">T10</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">33</span><span class="w">                  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">description</span><span class="w">         </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">flavor</span><span class="w">              </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="n">a636c15a</span><span class="o">-</span><span class="mi">92</span><span class="n">a2</span><span class="o">-</span><span class="mi">4253</span><span class="o">-</span><span class="mi">8945</span><span class="o">-</span><span class="mi">8875</span><span class="n">c58aae96</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">listeners</span><span class="w">           </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test1</span><span class="w">             </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">operating_status</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">OFFLINE</span><span class="w">                              </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">pools</span><span class="w">               </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">provider</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">octavia</span><span class="w">                              </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">provisioning_status</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">PENDING_CREATE</span><span class="w">                       </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">updated_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">vip_address</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.24</span><span class="w">                          </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">vip_network_id</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">ac9c0bd9</span><span class="o">-</span><span class="mi">3793</span><span class="o">-</span><span class="mi">48</span><span class="n">d3</span><span class="o">-</span><span class="n">a12e</span><span class="o">-</span><span class="n">eaa06028a366</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">vip_port_id</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="mi">7</span><span class="n">d85d059</span><span class="o">-</span><span class="mi">65</span><span class="n">c2</span><span class="o">-</span><span class="mi">47</span><span class="n">af</span><span class="o">-</span><span class="mi">90</span><span class="n">a2</span><span class="o">-</span><span class="mi">35337</span><span class="n">d4396f8</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">vip_qos_policy_id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">vip_subnet_id</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">63950</span><span class="n">c5e</span><span class="o">-</span><span class="n">fc70</span><span class="o">-</span><span class="mi">49</span><span class="n">ad</span><span class="o">-</span><span class="mi">8</span><span class="n">d6b</span><span class="o">-</span><span class="mi">092</span><span class="n">b8ba39016</span><span class="w"> </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="o">--</span><span class="n">name</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test2</span><span class="w"> </span><span class="o">--</span><span class="n">vip</span><span class="o">-</span><span class="n">subnet</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">nodes</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">admin_state_up</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">True</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">created_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">08</span><span class="n">T10</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">44</span><span class="w">                  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">description</span><span class="w">         </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">flavor</span><span class="w">              </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="n">c2041396</span><span class="o">-</span><span class="mi">66</span><span class="n">f5</span><span class="o">-</span><span class="mi">4726</span><span class="o">-</span><span class="n">ad47</span><span class="o">-</span><span class="mi">9</span><span class="n">ce7d2f7904f</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">listeners</span><span class="w">           </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test2</span><span class="w">             </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">operating_status</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">OFFLINE</span><span class="w">                              </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">pools</span><span class="w">               </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">provider</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">octavia</span><span class="w">                              </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">provisioning_status</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">PENDING_CREATE</span><span class="w">                       </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">updated_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">vip_address</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.27</span><span class="w">                          </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">vip_network_id</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">ac9c0bd9</span><span class="o">-</span><span class="mi">3793</span><span class="o">-</span><span class="mi">48</span><span class="n">d3</span><span class="o">-</span><span class="n">a12e</span><span class="o">-</span><span class="n">eaa06028a366</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">vip_port_id</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">ce0129ca</span><span class="o">-</span><span class="mi">9</span><span class="n">b39</span><span class="o">-</span><span class="mi">4</span><span class="n">ee1</span><span class="o">-</span><span class="mi">8</span><span class="n">d12</span><span class="o">-</span><span class="n">bb0685967f65</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">vip_qos_policy_id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">vip_subnet_id</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">63950</span><span class="n">c5e</span><span class="o">-</span><span class="n">fc70</span><span class="o">-</span><span class="mi">49</span><span class="n">ad</span><span class="o">-</span><span class="mi">8</span><span class="n">d6b</span><span class="o">-</span><span class="mi">092</span><span class="n">b8ba39016</span><span class="w"> </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>

<span class="c1"># wait until all loadbalancers are active</span>

<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">watch</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">list</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">list</span>
<span class="o">+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                                   </span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="n">vip_address</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">provisioning_status</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">provider</span><span class="w"> </span><span class="o">|</span>
<span class="o">+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">e5feb42d</span><span class="o">-</span><span class="mf">77e4</span><span class="o">-</span><span class="mi">428</span><span class="n">b</span><span class="o">-</span><span class="mi">9</span><span class="n">ad0</span><span class="o">-</span><span class="mi">55</span><span class="n">fe6d30f3b3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">default</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.21</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="n">octavia</span><span class="w">  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">a636c15a</span><span class="o">-</span><span class="mi">92</span><span class="n">a2</span><span class="o">-</span><span class="mi">4253</span><span class="o">-</span><span class="mi">8945</span><span class="o">-</span><span class="mi">8875</span><span class="n">c58aae96</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test1</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.24</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="n">octavia</span><span class="w">  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">c2041396</span><span class="o">-</span><span class="mi">66</span><span class="n">f5</span><span class="o">-</span><span class="mi">4726</span><span class="o">-</span><span class="n">ad47</span><span class="o">-</span><span class="mi">9</span><span class="n">ce7d2f7904f</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test2</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.27</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="n">octavia</span><span class="w">  </span><span class="o">|</span>
<span class="o">+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">listener</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="o">--</span><span class="n">name</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">listener</span><span class="w"> </span><span class="o">--</span><span class="n">protocol</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="o">--</span><span class="n">protocol</span><span class="o">-</span><span class="n">port</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">default</span>
<span class="o">+---------------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">                     </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                </span><span class="o">|</span>
<span class="o">+---------------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">admin_state_up</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">True</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">connection_limit</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w">                                   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">created_at</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">08</span><span class="n">T11</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span><span class="w">                  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">default_pool_id</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">default_tls_container_ref</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">description</span><span class="w">               </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                        </span><span class="o">|</span><span class="w"> </span><span class="n">be0d73e6</span><span class="o">-</span><span class="mi">1162</span><span class="o">-</span><span class="mi">4363</span><span class="o">-</span><span class="n">ad62</span><span class="o">-</span><span class="mi">0</span><span class="n">d74e2c16f6b</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">insert_headers</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">l7policies</span><span class="w">                </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">loadbalancers</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">e5feb42d</span><span class="o">-</span><span class="mf">77e4</span><span class="o">-</span><span class="mi">428</span><span class="n">b</span><span class="o">-</span><span class="mi">9</span><span class="n">ad0</span><span class="o">-</span><span class="mi">55</span><span class="n">fe6d30f3b3</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                      </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">listener</span><span class="w">  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">operating_status</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">OFFLINE</span><span class="w">                              </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">protocol</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="n">HTTP</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">protocol_port</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="mi">80</span><span class="w">                                   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">provisioning_status</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">PENDING_CREATE</span><span class="w">                       </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">sni_container_refs</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="p">[]</span><span class="w">                                   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">updated_at</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">+---------------------------+--------------------------------------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">pool</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="o">--</span><span class="n">name</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">pool</span><span class="w"> </span><span class="o">--</span><span class="n">lb</span><span class="o">-</span><span class="n">algorithm</span><span class="w"> </span><span class="n">ROUND_ROBIN</span><span class="w"> </span><span class="o">--</span><span class="n">listener</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">listener</span><span class="w"> </span><span class="o">--</span><span class="n">protocol</span><span class="w"> </span><span class="n">HTTP</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">admin_state_up</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">True</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">created_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">08</span><span class="n">T11</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">13</span><span class="w">                  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">description</span><span class="w">         </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">healthmonitor_id</span><span class="w">    </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="mi">47</span><span class="n">dc4567</span><span class="o">-</span><span class="n">f182</span><span class="o">-</span><span class="mi">4</span><span class="n">c16</span><span class="o">-</span><span class="n">a2ec</span><span class="o">-</span><span class="n">aa306e40779d</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">lb_algorithm</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">ROUND_ROBIN</span><span class="w">                          </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">listeners</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="n">be0d73e6</span><span class="o">-</span><span class="mi">1162</span><span class="o">-</span><span class="mi">4363</span><span class="o">-</span><span class="n">ad62</span><span class="o">-</span><span class="mi">0</span><span class="n">d74e2c16f6b</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">loadbalancers</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">e5feb42d</span><span class="o">-</span><span class="mf">77e4</span><span class="o">-</span><span class="mi">428</span><span class="n">b</span><span class="o">-</span><span class="mi">9</span><span class="n">ad0</span><span class="o">-</span><span class="mi">55</span><span class="n">fe6d30f3b3</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">members</span><span class="w">             </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">pool</span><span class="w">      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">operating_status</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">OFFLINE</span><span class="w">                              </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">protocol</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">HTTP</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">provisioning_status</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">PENDING_CREATE</span><span class="w">                       </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">session_persistence</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">updated_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">member</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="o">--</span><span class="n">subnet</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">nodes</span><span class="w"> </span><span class="o">--</span><span class="n">address</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.45</span><span class="w"> </span><span class="o">--</span><span class="n">protocol</span><span class="o">-</span><span class="n">port</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">pool</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">address</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.45</span><span class="w">                          </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">admin_state_up</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">True</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">created_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">08</span><span class="n">T11</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">06</span><span class="w">                  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="mi">431</span><span class="n">aa74f</span><span class="o">-</span><span class="n">e98d</span><span class="o">-</span><span class="mi">41</span><span class="n">fd</span><span class="o">-</span><span class="n">aab9</span><span class="o">-</span><span class="n">bf907f1e3993</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">operating_status</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">NO_MONITOR</span><span class="w">                           </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">protocol_port</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">80</span><span class="w">                                   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">provisioning_status</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">PENDING_CREATE</span><span class="w">                       </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">subnet_id</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="mi">63950</span><span class="n">c5e</span><span class="o">-</span><span class="n">fc70</span><span class="o">-</span><span class="mi">49</span><span class="n">ad</span><span class="o">-</span><span class="mi">8</span><span class="n">d6b</span><span class="o">-</span><span class="mi">092</span><span class="n">b8ba39016</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">updated_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">weight</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="mi">1</span><span class="w">                                    </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">monitor_port</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">monitor_address</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">floating</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">provider1</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">created_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">08</span><span class="n">T11</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">34</span><span class="n">Z</span><span class="w">                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">description</span><span class="w">         </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">fixed_ip_address</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">floating_ip_address</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.16</span><span class="o">.</span><span class="mf">0.211</span><span class="w">                         </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">floating_network_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">d14c0815</span><span class="o">-</span><span class="mi">22</span><span class="n">b5</span><span class="o">-</span><span class="mi">4</span><span class="n">cdf</span><span class="o">-</span><span class="mi">9</span><span class="n">db1</span><span class="o">-</span><span class="mi">5</span><span class="n">da7951f1e0a</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="mf">44720e51</span><span class="o">-</span><span class="n">dc95</span><span class="o">-</span><span class="mi">453</span><span class="n">b</span><span class="o">-</span><span class="mi">9993</span><span class="o">-</span><span class="mi">1</span><span class="n">cac1fbf40b9</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="mf">172.16</span><span class="o">.</span><span class="mf">0.211</span><span class="w">                         </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">port_id</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">qos_policy_id</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">revision_number</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="w">                                    </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">router_id</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">status</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="n">DOWN</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">subnet_id</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">updated_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">08</span><span class="n">T11</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">34</span><span class="n">Z</span><span class="w">                 </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="n">oad</span><span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">list</span>
<span class="o">+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                                   </span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="n">vip_address</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">provisioning_status</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">provider</span><span class="w"> </span><span class="o">|</span>
<span class="o">+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">e5feb42d</span><span class="o">-</span><span class="mf">77e4</span><span class="o">-</span><span class="mi">428</span><span class="n">b</span><span class="o">-</span><span class="mi">9</span><span class="n">ad0</span><span class="o">-</span><span class="mi">55</span><span class="n">fe6d30f3b3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">default</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.21</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="n">octavia</span><span class="w">  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">a636c15a</span><span class="o">-</span><span class="mi">92</span><span class="n">a2</span><span class="o">-</span><span class="mi">4253</span><span class="o">-</span><span class="mi">8945</span><span class="o">-</span><span class="mi">8875</span><span class="n">c58aae96</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test1</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.24</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="n">octavia</span><span class="w">  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">c2041396</span><span class="o">-</span><span class="mi">66</span><span class="n">f5</span><span class="o">-</span><span class="mi">4726</span><span class="o">-</span><span class="n">ad47</span><span class="o">-</span><span class="mi">9</span><span class="n">ce7d2f7904f</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test2</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.27</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="n">octavia</span><span class="w">  </span><span class="o">|</span>
<span class="o">+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">listener</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="o">--</span><span class="n">name</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test1</span><span class="o">-</span><span class="n">listener</span><span class="w"> </span><span class="o">--</span><span class="n">protocol</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="o">--</span><span class="n">protocol</span><span class="o">-</span><span class="n">port</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test1</span>
<span class="o">+---------------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">                     </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                </span><span class="o">|</span>
<span class="o">+---------------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">admin_state_up</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">True</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">connection_limit</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w">                                   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">created_at</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">08</span><span class="n">T11</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">33</span><span class="w">                  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">default_pool_id</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">default_tls_container_ref</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">description</span><span class="w">               </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                        </span><span class="o">|</span><span class="w"> </span><span class="mf">9e7236</span><span class="n">f5</span><span class="o">-</span><span class="n">cb15</span><span class="o">-</span><span class="mi">4</span><span class="n">c8c</span><span class="o">-</span><span class="mi">8</span><span class="n">ffb</span><span class="o">-</span><span class="n">a00182c44871</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">insert_headers</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">l7policies</span><span class="w">                </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">loadbalancers</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">a636c15a</span><span class="o">-</span><span class="mi">92</span><span class="n">a2</span><span class="o">-</span><span class="mi">4253</span><span class="o">-</span><span class="mi">8945</span><span class="o">-</span><span class="mi">8875</span><span class="n">c58aae96</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                      </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test1</span><span class="o">-</span><span class="n">listener</span><span class="w">    </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">operating_status</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">OFFLINE</span><span class="w">                              </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">protocol</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="n">HTTP</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">protocol_port</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="mi">80</span><span class="w">                                   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">provisioning_status</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">PENDING_CREATE</span><span class="w">                       </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">sni_container_refs</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="p">[]</span><span class="w">                                   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">updated_at</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">+---------------------------+--------------------------------------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">listener</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="o">--</span><span class="n">name</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test2</span><span class="o">-</span><span class="n">listener</span><span class="w"> </span><span class="o">--</span><span class="n">protocol</span><span class="w"> </span><span class="n">HTTP</span><span class="w"> </span><span class="o">--</span><span class="n">protocol</span><span class="o">-</span><span class="n">port</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test2</span>
<span class="o">+---------------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">                     </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                </span><span class="o">|</span>
<span class="o">+---------------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">admin_state_up</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">True</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">connection_limit</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w">                                   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">created_at</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">08</span><span class="n">T11</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">42</span><span class="w">                  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">default_pool_id</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">default_tls_container_ref</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">description</span><span class="w">               </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                        </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="n">cd99fe3</span><span class="o">-</span><span class="mi">3750</span><span class="o">-</span><span class="mi">4506</span><span class="o">-</span><span class="n">bafa</span><span class="o">-</span><span class="mi">57</span><span class="n">cf4a15c7e8</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">insert_headers</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">l7policies</span><span class="w">                </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">loadbalancers</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">c2041396</span><span class="o">-</span><span class="mi">66</span><span class="n">f5</span><span class="o">-</span><span class="mi">4726</span><span class="o">-</span><span class="n">ad47</span><span class="o">-</span><span class="mi">9</span><span class="n">ce7d2f7904f</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                      </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test2</span><span class="o">-</span><span class="n">listener</span><span class="w">    </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">operating_status</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">OFFLINE</span><span class="w">                              </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">protocol</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="n">HTTP</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">protocol_port</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="mi">80</span><span class="w">                                   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">provisioning_status</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">PENDING_CREATE</span><span class="w">                       </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">sni_container_refs</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="p">[]</span><span class="w">                                   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">updated_at</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">+---------------------------+--------------------------------------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">pool</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="o">--</span><span class="n">name</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test1</span><span class="o">-</span><span class="n">pool</span><span class="w"> </span><span class="o">--</span><span class="n">lb</span><span class="o">-</span><span class="n">algorithm</span><span class="w"> </span><span class="n">ROUND_ROBIN</span><span class="w"> </span><span class="o">--</span><span class="n">listener</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test1</span><span class="o">-</span><span class="n">listener</span><span class="w"> </span><span class="o">--</span><span class="n">protocol</span><span class="w"> </span><span class="n">HTTP</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">admin_state_up</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">True</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">created_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">08</span><span class="n">T11</span><span class="p">:</span><span class="mi">04</span><span class="p">:</span><span class="mi">00</span><span class="w">                  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">description</span><span class="w">         </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">healthmonitor_id</span><span class="w">    </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="n">d7e93f06</span><span class="o">-</span><span class="mi">3</span><span class="n">afd</span><span class="o">-</span><span class="mi">467</span><span class="n">d</span><span class="o">-</span><span class="n">b43a</span><span class="o">-</span><span class="mf">4018e59</span><span class="n">d6be1</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">lb_algorithm</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">ROUND_ROBIN</span><span class="w">                          </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">listeners</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="mf">9e7236</span><span class="n">f5</span><span class="o">-</span><span class="n">cb15</span><span class="o">-</span><span class="mi">4</span><span class="n">c8c</span><span class="o">-</span><span class="mi">8</span><span class="n">ffb</span><span class="o">-</span><span class="n">a00182c44871</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">loadbalancers</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">a636c15a</span><span class="o">-</span><span class="mi">92</span><span class="n">a2</span><span class="o">-</span><span class="mi">4253</span><span class="o">-</span><span class="mi">8945</span><span class="o">-</span><span class="mi">8875</span><span class="n">c58aae96</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">members</span><span class="w">             </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test1</span><span class="o">-</span><span class="n">pool</span><span class="w">        </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">operating_status</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">OFFLINE</span><span class="w">                              </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">protocol</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">HTTP</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">provisioning_status</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">PENDING_CREATE</span><span class="w">                       </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">session_persistence</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">updated_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">pool</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="o">--</span><span class="n">name</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test2</span><span class="o">-</span><span class="n">pool</span><span class="w"> </span><span class="o">--</span><span class="n">lb</span><span class="o">-</span><span class="n">algorithm</span><span class="w"> </span><span class="n">ROUND_ROBIN</span><span class="w"> </span><span class="o">--</span><span class="n">listener</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test2</span><span class="o">-</span><span class="n">listener</span><span class="w"> </span><span class="o">--</span><span class="n">protocol</span><span class="w"> </span><span class="n">HTTP</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">admin_state_up</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">True</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">created_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">08</span><span class="n">T11</span><span class="p">:</span><span class="mi">04</span><span class="p">:</span><span class="mi">10</span><span class="w">                  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">description</span><span class="w">         </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">healthmonitor_id</span><span class="w">    </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="n">c6a4c5dd</span><span class="o">-</span><span class="mi">836</span><span class="n">f</span><span class="o">-</span><span class="mi">42</span><span class="n">fe</span><span class="o">-</span><span class="mi">91</span><span class="n">bf</span><span class="o">-</span><span class="mi">5</span><span class="n">a71d3109691</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">lb_algorithm</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">ROUND_ROBIN</span><span class="w">                          </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">listeners</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="n">cd99fe3</span><span class="o">-</span><span class="mi">3750</span><span class="o">-</span><span class="mi">4506</span><span class="o">-</span><span class="n">bafa</span><span class="o">-</span><span class="mi">57</span><span class="n">cf4a15c7e8</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">loadbalancers</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">c2041396</span><span class="o">-</span><span class="mi">66</span><span class="n">f5</span><span class="o">-</span><span class="mi">4726</span><span class="o">-</span><span class="n">ad47</span><span class="o">-</span><span class="mi">9</span><span class="n">ce7d2f7904f</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">members</span><span class="w">             </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test2</span><span class="o">-</span><span class="n">pool</span><span class="w">        </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">operating_status</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">OFFLINE</span><span class="w">                              </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">protocol</span><span class="w">            </span><span class="o">|</span><span class="w"> </span><span class="n">HTTP</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">provisioning_status</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">PENDING_CREATE</span><span class="w">                       </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">session_persistence</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">updated_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">member</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="o">--</span><span class="n">subnet</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">nodes</span><span class="w"> </span><span class="o">--</span><span class="n">address</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.13</span><span class="w"> </span><span class="o">--</span><span class="n">protocol</span><span class="o">-</span><span class="n">port</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test1</span><span class="o">-</span><span class="n">pool</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">address</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.13</span><span class="w">                          </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">admin_state_up</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">True</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">created_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">08</span><span class="n">T11</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">02</span><span class="w">                  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="mi">584</span><span class="n">a9a8b</span><span class="o">-</span><span class="n">eb1c</span><span class="o">-</span><span class="mi">41</span><span class="n">b4</span><span class="o">-</span><span class="mi">9308</span><span class="o">-</span><span class="mi">0</span><span class="n">a1cd9f91122</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">operating_status</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">NO_MONITOR</span><span class="w">                           </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">protocol_port</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">80</span><span class="w">                                   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">provisioning_status</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">PENDING_CREATE</span><span class="w">                       </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">subnet_id</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="mi">63950</span><span class="n">c5e</span><span class="o">-</span><span class="n">fc70</span><span class="o">-</span><span class="mi">49</span><span class="n">ad</span><span class="o">-</span><span class="mi">8</span><span class="n">d6b</span><span class="o">-</span><span class="mi">092</span><span class="n">b8ba39016</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">updated_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">weight</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="mi">1</span><span class="w">                                    </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">monitor_port</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">monitor_address</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">member</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="o">--</span><span class="n">subnet</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="n">cluster</span><span class="o">-</span><span class="mi">7</span><span class="n">n7w9</span><span class="o">-</span><span class="n">nodes</span><span class="w"> </span><span class="o">--</span><span class="n">address</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.14</span><span class="w"> </span><span class="o">--</span><span class="n">protocol</span><span class="o">-</span><span class="n">port</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test2</span><span class="o">-</span><span class="n">pool</span>
<span class="n">openstack</span><span class="w"> </span><span class="n">floating</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="n">creat</span><span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">address</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.14</span><span class="w">                          </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">admin_state_up</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">True</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">created_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">08</span><span class="n">T11</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">14</span><span class="w">                  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="mi">8</span><span class="n">d859649</span><span class="o">-</span><span class="n">fcc1</span><span class="o">-</span><span class="mi">4</span><span class="n">ffe</span><span class="o">-</span><span class="n">b9be</span><span class="o">-</span><span class="mi">0</span><span class="n">ed6540346e1</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">operating_status</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">NO_MONITOR</span><span class="w">                           </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">protocol_port</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">80</span><span class="w">                                   </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">provisioning_status</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">PENDING_CREATE</span><span class="w">                       </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">subnet_id</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="mi">63950</span><span class="n">c5e</span><span class="o">-</span><span class="n">fc70</span><span class="o">-</span><span class="mi">49</span><span class="n">ad</span><span class="o">-</span><span class="mi">8</span><span class="n">d6b</span><span class="o">-</span><span class="mi">092</span><span class="n">b8ba39016</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">updated_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">weight</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="mi">1</span><span class="w">                                    </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">monitor_port</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">monitor_address</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">floating</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">provider1</span>
<span class="n">o</span><span class="p">[</span><span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">               </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">                                </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">created_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">08</span><span class="n">T11</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">27</span><span class="n">Z</span><span class="w">                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">description</span><span class="w">         </span><span class="o">|</span><span class="w">                                      </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">fixed_ip_address</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">floating_ip_address</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.16</span><span class="o">.</span><span class="mf">0.204</span><span class="w">                         </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">floating_network_id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">d14c0815</span><span class="o">-</span><span class="mi">22</span><span class="n">b5</span><span class="o">-</span><span class="mi">4</span><span class="n">cdf</span><span class="o">-</span><span class="mi">9</span><span class="n">db1</span><span class="o">-</span><span class="mi">5</span><span class="n">da7951f1e0a</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                  </span><span class="o">|</span><span class="w"> </span><span class="mi">72181227</span><span class="o">-</span><span class="mi">12</span><span class="n">f0</span><span class="o">-</span><span class="mi">4790</span><span class="o">-</span><span class="n">bd7c</span><span class="o">-</span><span class="mf">208785e05918</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                </span><span class="o">|</span><span class="w"> </span><span class="mf">172.16</span><span class="o">.</span><span class="mf">0.204</span><span class="w">                         </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">port_id</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w">     </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">qos_policy_id</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">revision_number</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="w">                                    </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">router_id</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">status</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="n">DOWN</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">subnet_id</span><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">updated_at</span><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">08</span><span class="n">T11</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">27</span><span class="n">Z</span><span class="w">                 </span><span class="o">|</span>
<span class="o">+---------------------+--------------------------------------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">list</span>
<span class="n">openstack</span><span class="w"> </span><span class="n">floating</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="o">+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                                   </span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="n">vip_address</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">provisioning_status</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">provider</span><span class="w"> </span><span class="o">|</span>
<span class="o">+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">e5feb42d</span><span class="o">-</span><span class="mf">77e4</span><span class="o">-</span><span class="mi">428</span><span class="n">b</span><span class="o">-</span><span class="mi">9</span><span class="n">ad0</span><span class="o">-</span><span class="mi">55</span><span class="n">fe6d30f3b3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">default</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.21</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="n">octavia</span><span class="w">  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">a636c15a</span><span class="o">-</span><span class="mi">92</span><span class="n">a2</span><span class="o">-</span><span class="mi">4253</span><span class="o">-</span><span class="mi">8945</span><span class="o">-</span><span class="mi">8875</span><span class="n">c58aae96</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test1</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.24</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="n">octavia</span><span class="w">  </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">c2041396</span><span class="o">-</span><span class="mi">66</span><span class="n">f5</span><span class="o">-</span><span class="mi">4726</span><span class="o">-</span><span class="n">ad47</span><span class="o">-</span><span class="mi">9</span><span class="n">ce7d2f7904f</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">test2</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.27</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="n">octavia</span><span class="w">  </span><span class="o">|</span>
<span class="o">+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+</span>
<span class="n">l</span><span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">floating</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="n">list</span>
<span class="o">+--------------------------------------+---------------------+------------------+--------------------------------------+--------------------------------------+----------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">ID</span><span class="w">                                   </span><span class="o">|</span><span class="w"> </span><span class="n">Floating</span><span class="w"> </span><span class="n">IP</span><span class="w"> </span><span class="n">Address</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Fixed</span><span class="w"> </span><span class="n">IP</span><span class="w"> </span><span class="n">Address</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Port</span><span class="w">                                 </span><span class="o">|</span><span class="w"> </span><span class="n">Floating</span><span class="w"> </span><span class="n">Network</span><span class="w">                     </span><span class="o">|</span><span class="w"> </span><span class="n">Project</span><span class="w">                          </span><span class="o">|</span>
<span class="o">+--------------------------------------+---------------------+------------------+--------------------------------------+--------------------------------------+----------------------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="n">a3e9fa7</span><span class="o">-</span><span class="mi">577</span><span class="n">c</span><span class="o">-</span><span class="mi">47</span><span class="n">f9</span><span class="o">-</span><span class="n">b9e4</span><span class="o">-</span><span class="n">f583bd3ce180</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.16</span><span class="o">.</span><span class="mf">0.208</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="mf">192.168</span><span class="o">.</span><span class="mf">0.108</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">03</span><span class="n">d91ec5</span><span class="o">-</span><span class="mi">8</span><span class="n">de6</span><span class="o">-</span><span class="mi">415</span><span class="n">b</span><span class="o">-</span><span class="mi">9581</span><span class="o">-</span><span class="n">d00501bb40ed</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">d14c0815</span><span class="o">-</span><span class="mi">22</span><span class="n">b5</span><span class="o">-</span><span class="mi">4</span><span class="n">cdf</span><span class="o">-</span><span class="mi">9</span><span class="n">db1</span><span class="o">-</span><span class="mi">5</span><span class="n">da7951f1e0a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mf">44720e51</span><span class="o">-</span><span class="n">dc95</span><span class="o">-</span><span class="mi">453</span><span class="n">b</span><span class="o">-</span><span class="mi">9993</span><span class="o">-</span><span class="mi">1</span><span class="n">cac1fbf40b9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.16</span><span class="o">.</span><span class="mf">0.211</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span><span class="w"> </span><span class="n">d14c0815</span><span class="o">-</span><span class="mi">22</span><span class="n">b5</span><span class="o">-</span><span class="mi">4</span><span class="n">cdf</span><span class="o">-</span><span class="mi">9</span><span class="n">db1</span><span class="o">-</span><span class="mi">5</span><span class="n">da7951f1e0a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">497</span><span class="n">c6667</span><span class="o">-</span><span class="mi">22</span><span class="n">b3</span><span class="o">-</span><span class="mi">4</span><span class="n">ed7</span><span class="o">-</span><span class="n">b6af</span><span class="o">-</span><span class="mi">1</span><span class="n">c5091b14209</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.16</span><span class="o">.</span><span class="mf">0.213</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.5</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="mi">3</span><span class="n">bc4d5e1</span><span class="o">-</span><span class="mi">90</span><span class="n">c9</span><span class="o">-</span><span class="mi">4</span><span class="n">da1</span><span class="o">-</span><span class="mi">86</span><span class="n">cd</span><span class="o">-</span><span class="n">d5e5d6fe985d</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">d14c0815</span><span class="o">-</span><span class="mi">22</span><span class="n">b5</span><span class="o">-</span><span class="mi">4</span><span class="n">cdf</span><span class="o">-</span><span class="mi">9</span><span class="n">db1</span><span class="o">-</span><span class="mi">5</span><span class="n">da7951f1e0a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">4</span><span class="n">b9e9daf</span><span class="o">-</span><span class="mf">4e7</span><span class="n">f</span><span class="o">-</span><span class="mi">4338</span><span class="o">-</span><span class="n">ad70</span><span class="o">-</span><span class="mf">6206e7</span><span class="n">e56367</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.16</span><span class="o">.</span><span class="mf">0.214</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.7</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">ee68b77c</span><span class="o">-</span><span class="mi">95</span><span class="n">af</span><span class="o">-</span><span class="mi">4</span><span class="n">bb2</span><span class="o">-</span><span class="n">ba62</span><span class="o">-</span><span class="n">c4d06d728c47</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">d14c0815</span><span class="o">-</span><span class="mi">22</span><span class="n">b5</span><span class="o">-</span><span class="mi">4</span><span class="n">cdf</span><span class="o">-</span><span class="mi">9</span><span class="n">db1</span><span class="o">-</span><span class="mi">5</span><span class="n">da7951f1e0a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="mi">72181227</span><span class="o">-</span><span class="mi">12</span><span class="n">f0</span><span class="o">-</span><span class="mi">4790</span><span class="o">-</span><span class="n">bd7c</span><span class="o">-</span><span class="mf">208785e05918</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.16</span><span class="o">.</span><span class="mf">0.204</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span><span class="w"> </span><span class="n">d14c0815</span><span class="o">-</span><span class="mi">22</span><span class="n">b5</span><span class="o">-</span><span class="mi">4</span><span class="n">cdf</span><span class="o">-</span><span class="mi">9</span><span class="n">db1</span><span class="o">-</span><span class="mi">5</span><span class="n">da7951f1e0a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">a2693cfc</span><span class="o">-</span><span class="mi">4379</span><span class="o">-</span><span class="mi">4</span><span class="n">d9b</span><span class="o">-</span><span class="n">bb90</span><span class="o">-</span><span class="n">a86c3fcafd9c</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">172.16</span><span class="o">.</span><span class="mf">0.217</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">             </span><span class="o">|</span><span class="w"> </span><span class="n">None</span><span class="w">                                 </span><span class="o">|</span><span class="w"> </span><span class="n">d14c0815</span><span class="o">-</span><span class="mi">22</span><span class="n">b5</span><span class="o">-</span><span class="mi">4</span><span class="n">cdf</span><span class="o">-</span><span class="mi">9</span><span class="n">db1</span><span class="o">-</span><span class="mi">5</span><span class="n">da7951f1e0a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span>
<span class="o">+--------------------------------------+---------------------+------------------+--------------------------------------+--------------------------------------+----------------------------------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.21</span>
<span class="o">|</span><span class="w"> </span><span class="n">f336d8c6</span><span class="o">-</span><span class="mi">8</span><span class="n">f47</span><span class="o">-</span><span class="mi">4</span><span class="n">d61</span><span class="o">-</span><span class="n">a865</span><span class="o">-</span><span class="mi">19</span><span class="n">f34a671ffa</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">octavia</span><span class="o">-</span><span class="n">lb</span><span class="o">-</span><span class="n">e5feb42d</span><span class="o">-</span><span class="mf">77e4</span><span class="o">-</span><span class="mi">428</span><span class="n">b</span><span class="o">-</span><span class="mi">9</span><span class="n">ad0</span><span class="o">-</span><span class="mi">55</span><span class="n">fe6d30f3b3</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="n">fa</span><span class="p">:</span><span class="mi">16</span><span class="p">:</span><span class="mi">3</span><span class="n">e</span><span class="p">:</span><span class="n">f1</span><span class="p">:</span><span class="mi">04</span><span class="p">:</span><span class="mi">50</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ip_address</span><span class="o">=</span><span class="s1">&#39;172.31.0.21&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">subnet_id</span><span class="o">=</span><span class="s1">&#39;63950c5e-fc70-49ad-8d6b-092b8ba39016&#39;</span><span class="w">                         </span><span class="o">|</span><span class="w"> </span><span class="n">DOWN</span><span class="w">   </span><span class="o">|</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.24</span>
<span class="o">|</span><span class="w"> </span><span class="mi">7</span><span class="n">d85d059</span><span class="o">-</span><span class="mi">65</span><span class="n">c2</span><span class="o">-</span><span class="mi">47</span><span class="n">af</span><span class="o">-</span><span class="mi">90</span><span class="n">a2</span><span class="o">-</span><span class="mi">35337</span><span class="n">d4396f8</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">octavia</span><span class="o">-</span><span class="n">lb</span><span class="o">-</span><span class="n">a636c15a</span><span class="o">-</span><span class="mi">92</span><span class="n">a2</span><span class="o">-</span><span class="mi">4253</span><span class="o">-</span><span class="mi">8945</span><span class="o">-</span><span class="mi">8875</span><span class="n">c58aae96</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="n">fa</span><span class="p">:</span><span class="mi">16</span><span class="p">:</span><span class="mi">3</span><span class="n">e</span><span class="p">:</span><span class="mi">8</span><span class="n">c</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mi">69</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ip_address</span><span class="o">=</span><span class="s1">&#39;172.31.0.24&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">subnet_id</span><span class="o">=</span><span class="s1">&#39;63950c5e-fc70-49ad-8d6b-092b8ba39016&#39;</span><span class="w">                         </span><span class="o">|</span><span class="w"> </span><span class="n">DOWN</span><span class="w">   </span><span class="o">|</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.27</span>
<span class="o">|</span><span class="w"> </span><span class="n">ce0129ca</span><span class="o">-</span><span class="mi">9</span><span class="n">b39</span><span class="o">-</span><span class="mi">4</span><span class="n">ee1</span><span class="o">-</span><span class="mi">8</span><span class="n">d12</span><span class="o">-</span><span class="n">bb0685967f65</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">octavia</span><span class="o">-</span><span class="n">lb</span><span class="o">-</span><span class="n">c2041396</span><span class="o">-</span><span class="mi">66</span><span class="n">f5</span><span class="o">-</span><span class="mi">4726</span><span class="o">-</span><span class="n">ad47</span><span class="o">-</span><span class="mi">9</span><span class="n">ce7d2f7904f</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="n">fa</span><span class="p">:</span><span class="mi">16</span><span class="p">:</span><span class="mi">3</span><span class="n">e</span><span class="p">:</span><span class="n">e0</span><span class="p">:</span><span class="n">d7</span><span class="p">:</span><span class="n">bd</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ip_address</span><span class="o">=</span><span class="s1">&#39;172.31.0.27&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">subnet_id</span><span class="o">=</span><span class="s1">&#39;63950c5e-fc70-49ad-8d6b-092b8ba39016&#39;</span><span class="w">                         </span><span class="o">|</span><span class="w"> </span><span class="n">DOWN</span><span class="w">   </span><span class="o">|</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">floating</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="mf">172.16</span><span class="o">.</span><span class="mf">0.211</span><span class="w"> </span><span class="o">--</span><span class="n">port</span><span class="w"> </span><span class="n">octavia</span><span class="o">-</span><span class="n">lb</span><span class="o">-</span><span class="n">e5feb42d</span><span class="o">-</span><span class="mf">77e4</span><span class="o">-</span><span class="mi">428</span><span class="n">b</span><span class="o">-</span><span class="mi">9</span><span class="n">ad0</span><span class="o">-</span><span class="mi">55</span><span class="n">fe6d30f3b3</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">floating</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="mf">172.16</span><span class="o">.</span><span class="mf">0.204</span><span class="w"> </span><span class="o">--</span><span class="n">port</span><span class="w"> </span><span class="n">octavia</span><span class="o">-</span><span class="n">lb</span><span class="o">-</span><span class="n">a636c15a</span><span class="o">-</span><span class="mi">92</span><span class="n">a2</span><span class="o">-</span><span class="mi">4253</span><span class="o">-</span><span class="mi">8945</span><span class="o">-</span><span class="mi">8875</span><span class="n">c58aae96</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">floating</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="mf">172.16</span><span class="o">.</span><span class="mf">0.217</span><span class="w"> </span><span class="o">--</span><span class="n">port</span><span class="w"> </span><span class="n">octavia</span><span class="o">-</span><span class="n">lb</span><span class="o">-</span><span class="n">c2041396</span><span class="o">-</span><span class="mi">66</span><span class="n">f5</span><span class="o">-</span><span class="mi">4726</span><span class="o">-</span><span class="n">ad47</span><span class="o">-</span><span class="mi">9</span><span class="n">ce7d2f7904f</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">openstack</span><span class="w"> </span><span class="n">loadbalancer</span><span class="w"> </span><span class="n">member</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">ingress</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">pool</span>
<span class="o">+--------------------------------------+------+----------------------------------+---------------------+-------------+---------------+------------------+--------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">                                   </span><span class="o">|</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">project_id</span><span class="w">                       </span><span class="o">|</span><span class="w"> </span><span class="n">provisioning_status</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">address</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">protocol_port</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">operating_status</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">|</span>
<span class="o">+--------------------------------------+------+----------------------------------+---------------------+-------------+---------------+------------------+--------+</span>
<span class="o">|</span><span class="w"> </span><span class="mi">431</span><span class="n">aa74f</span><span class="o">-</span><span class="n">e98d</span><span class="o">-</span><span class="mi">41</span><span class="n">fd</span><span class="o">-</span><span class="n">aab9</span><span class="o">-</span><span class="n">bf907f1e3993</span><span class="w"> </span><span class="o">|</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">a416f556938f454f849da42faa317cd3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ACTIVE</span><span class="w">              </span><span class="o">|</span><span class="w"> </span><span class="mf">172.31</span><span class="o">.</span><span class="mf">0.45</span><span class="w"> </span><span class="o">|</span><span class="w">            </span><span class="mi">80</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">NO_MONITOR</span><span class="w">       </span><span class="o">|</span><span class="w">      </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span>
<span class="o">+--------------------------------------+------+----------------------------------+---------------------+-------------+---------------+------------------+--------+</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">curl</span><span class="w"> </span><span class="o">^</span><span class="n">C</span>
</code></pre></div></td></tr></table></div></p>
<p>Once this is done, update your DNS entries. In this lab case, I'm simply changing <code class="highlight">/etc/hosts</code>:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">stack</span><span class="err">@</span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">hosts</span>
<span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="w">   </span><span class="n">undercloud</span><span class="o">-</span><span class="mf">0.</span><span class="n">redhat</span><span class="o">.</span><span class="n">local</span><span class="w"> </span><span class="n">undercloud</span><span class="o">-</span><span class="mi">0</span>
<span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="w">   </span><span class="n">localhost</span><span class="w"> </span><span class="n">localhost</span><span class="o">.</span><span class="n">localdomain</span><span class="w"> </span><span class="n">localhost4</span><span class="w"> </span><span class="n">localhost4</span><span class="o">.</span><span class="n">localdomain4</span>
<span class="p">::</span><span class="mi">1</span><span class="w">         </span><span class="n">localhost</span><span class="w"> </span><span class="n">localhost</span><span class="o">.</span><span class="n">localdomain</span><span class="w"> </span><span class="n">localhost6</span><span class="w"> </span><span class="n">localhost6</span><span class="o">.</span><span class="n">localdomain6</span>

<span class="c1"># API cluster VIP</span>
<span class="mf">172.16</span><span class="o">.</span><span class="mf">0.213</span><span class="w"> </span><span class="n">api</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>

<span class="c1"># original VIP</span>
<span class="c1"># 172.16.0.214 oauth-openshift.apps.cluster.example.com console-openshift-console.apps.cluster.example.com downloads-openshift-console.apps.cluster.example.com alertmanager-main-openshift-monitoring.apps.cluster.example.com grafana-openshift-monitoring.apps.cluster.example.com prometheus-k8s-openshift-monitoring.apps.cluster.example.com thanos-querier-openshift-monitoring.apps.cluster.example.com fh.apps.cluster.example.com fh.test2.cluster.example.com fh.test1.cluster.example.com</span>

<span class="c1"># new Octavia VIPs</span>
<span class="mf">172.16</span><span class="o">.</span><span class="mf">0.211</span><span class="w"> </span><span class="n">oauth</span><span class="o">-</span><span class="n">openshift</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">console</span><span class="o">-</span><span class="n">openshift</span><span class="o">-</span><span class="n">console</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">downloads</span><span class="o">-</span><span class="n">openshift</span><span class="o">-</span><span class="n">console</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">alertmanager</span><span class="o">-</span><span class="n">main</span><span class="o">-</span><span class="n">openshift</span><span class="o">-</span><span class="n">monitoring</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">grafana</span><span class="o">-</span><span class="n">openshift</span><span class="o">-</span><span class="n">monitoring</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">prometheus</span><span class="o">-</span><span class="n">k8s</span><span class="o">-</span><span class="n">openshift</span><span class="o">-</span><span class="n">monitoring</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">thanos</span><span class="o">-</span><span class="n">querier</span><span class="o">-</span><span class="n">openshift</span><span class="o">-</span><span class="n">monitoring</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">fh</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="mf">172.16</span><span class="o">.</span><span class="mf">0.204</span><span class="w"> </span><span class="n">fh</span><span class="o">.</span><span class="n">test1</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="mf">172.16</span><span class="o">.</span><span class="mf">0.217</span><span class="w"> </span><span class="n">fh</span><span class="o">.</span><span class="n">test2</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
</code></pre></div></td></tr></table></div></p>
<h2 id="testing">Testing</h2>
<p>This should now work:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="o">[</span><span class="n">stack@undercloud-0 ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">curl</span><span class="w"> </span><span class="n">fh</span><span class="p">.</span><span class="n">apps</span><span class="p">.</span><span class="n">cluster</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span>
<span class="n">Apache</span><span class="w"> </span><span class="k">default</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="o">[</span><span class="n">stack@undercloud-0 ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">curl</span><span class="w"> </span><span class="n">fh</span><span class="p">.</span><span class="n">test1</span><span class="p">.</span><span class="n">cluster</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span>
<span class="n">Apache</span><span class="w"> </span><span class="n">test1</span>
<span class="p">(</span><span class="n">overcloud</span><span class="p">)</span><span class="w"> </span><span class="o">[</span><span class="n">stack@undercloud-0 ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">curl</span><span class="w"> </span><span class="n">fh</span><span class="p">.</span><span class="n">test2</span><span class="p">.</span><span class="n">cluster</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">com</span>
<span class="n">Apache</span><span class="w"> </span><span class="n">test2</span>
</code></pre></div></td></tr></table></div></p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">September 13, 2020</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.prune", "navigation.top", "navigation.path", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>