
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.6">
    
    
      
        <title>Ingress Controller Sharding OCP on OSP - Andreas Karis Blog</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2c0c5eaf.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue-grey" data-md-color-accent="red">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ingress-controller-sharding-for-openshfit-on-openstack-with-octavia" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Andreas Karis Blog" class="md-header__button md-logo" aria-label="Andreas Karis Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Andreas Karis Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Ingress Controller Sharding OCP on OSP
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Andreas Karis Blog" class="md-nav__button md-logo" aria-label="Andreas Karis Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Andreas Karis Blog
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Ceph
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Ceph" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Ceph
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../ceph/ceph-manual-test/" class="md-nav__link">
        Ceph manual test with qemu
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Containers
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Containers" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Containers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/cgroups/" class="md-nav__link">
        cgroups
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/containers/" class="md-nav__link">
        Containers in Linux
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../list_docker_registry_containers/" class="md-nav__link">
        List container images in registry
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/namespaces/" class="md-nav__link">
        namespaces
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Linux
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Linux" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/cgroups/" class="md-nav__link">
        cgroups
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/containers/" class="md-nav__link">
        Containers in Linux
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/java-idrac-issues/" class="md-nav__link">
        Java Idrac Issues
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/ipxe-boot-environment/" class="md-nav__link">
        iPXE boot environment on Fedora
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docs/linux/get-process-cgroup-info-and-limits.md" class="md-nav__link">
        Retrieving process cgroup resource usage and limit info
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/hugepages/" class="md-nav__link">
        Hugepages
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/meson/" class="md-nav__link">
        meson
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/namespaces/" class="md-nav__link">
        namespaces
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/old_java_version_with_xorgs_in_container/" class="md-nav__link">
        Old Java inside a container with xorgs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/libvirt-uefi-without-secureboot/" class="md-nav__link">
        RHEL Booting a virtual machine with UEFI but without secure boot
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/setting-journalctl-limits/" class="md-nav__link">
        Setting journalctl limits
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Networking
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Networking" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Networking
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/arp_and_the_neighbor_table/" class="md-nav__link">
        ARP and the Neighbor table
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/bpf-and-tcpdump/" class="md-nav__link">
        BPF and tcpdump
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/bonding_in_linux/" class="md-nav__link">
        Bonding in Linux
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/juniper_x520/" class="md-nav__link">
        Configure Juniper switch
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/haproxy-and-h2c/" class="md-nav__link">
        haproxy and HTTP/2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/geneve_tunneling/" class="md-nav__link">
        Geneve tunneling
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/netlink/" class="md-nav__link">
        Netlink
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/ovn-kind/" class="md-nav__link">
        OVN kind
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/ovn_standalone_on_fedora31/" class="md-nav__link">
        OVN standalone on Fedora 31
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/ovs_recirculation/" class="md-nav__link">
        OVS packet recirculation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/ovs-vxlan-tunnels-and-dscp/" class="md-nav__link">
        OVS VXLAN tunnels and DSCP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/ovs_with_gdb/" class="md-nav__link">
        OVS with GDB
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/sctp/" class="md-nav__link">
        SCTP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/wireguard/" class="md-nav__link">
        Wireguard
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      <label class="md-nav__link" for="__nav_6">
        OpenShift
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="OpenShift" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          OpenShift
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../alertmanager/" class="md-nav__link">
        AlertManager
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../cpu-manager-with-custom-machine-config-pool/" class="md-nav__link">
        CPU manager with custom MachineConfigPool
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../crio-conmon-runc/" class="md-nav__link">
        Crio vs conmon vs runc
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../etcd_perf/" class="md-nav__link">
        Etcd Performance tests
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../get-vs-list-api-calls/" class="md-nav__link">
        Get vs List API Calls
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../openshift_httpbin_tshark_sidecar/" class="md-nav__link">
        Httpbin tshark sidecar container
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../kubernetes_cluster/" class="md-nav__link">
        Hints for installing kubernetes on Fedora
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../HPA/" class="md-nav__link">
        Horizontal Pod Autoscaler
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../how_rhcos_updates_work/" class="md-nav__link">
        How RHCOS updates work
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ocp4-infra-nodes-with-machineset-without-worker-label/" class="md-nav__link">
        Infra nodes with MachineSets without worker label
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Ingress Controller Sharding OCP on OSP
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Ingress Controller Sharding OCP on OSP
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preface" class="md-nav__link">
    Preface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-test-projects-and-the-default-project-ingresscontrollers" class="md-nav__link">
    Configuring test projects and the default project IngressControllers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-ingresscontrollers" class="md-nav__link">
    Configuring IngressControllers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-test-builds-and-services" class="md-nav__link">
    Creating test builds and services
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-octavia-loadbalancers-for-server-ingresscontrollers" class="md-nav__link">
    Configuring Octavia loadbalancers for server IngressControllers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ingress-controller-sharding-on-separate-vip/" class="md-nav__link">
        Ingress Controller Sharding on separate VIP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../openshift_mirror_registry/" class="md-nav__link">
        Installing a cluster with a mirror registry
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../istio-1.6-on-ocp.4.x/" class="md-nav__link">
        Istio 1.6 on OpenShift 4.x
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../kata/" class="md-nav__link">
        kata containers and the kata operatora
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../kind-with-private-registry/" class="md-nav__link">
        Kind with private registry
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../mounting-container-image/" class="md-nav__link">
        Mount a container image
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../openstack/install_openshift_on_openstack/" class="md-nav__link">
        OpenShift on OpenStack
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../private-registry/" class="md-nav__link">
        Private container registry
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../proxy-ocp-4.5/" class="md-nav__link">
        Proxy OCP 4.5
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scc/" class="md-nav__link">
        Security Context Constraints (SCC)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../fix-selinux-labels-coreos/" class="md-nav__link">
        SElinux labels fix
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../networking/sctp/" class="md-nav__link">
        SCTP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../openshift_troubleshooting_etcd_state/" class="md-nav__link">
        Troubleshooting etcd state
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../useful-ocp-commands/" class="md-nav__link">
        Useful commands for OpenShift
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting_openshift_on_openstack_worker_creation/" class="md-nav__link">
        Troubleshooting OpenShift on OpenStack worker creation
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        OpenStack
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="OpenStack" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          OpenStack
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../openstack/reattach_to_running_deployment/" class="md-nav__link">
        Reattach to running deployment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../openstack/using_clouds_yaml/" class="md-nav__link">
        Using clouds.yaml
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        OperatorSDK
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="OperatorSDK" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          OperatorSDK
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../operator-sdk/operator-sdk-reconciliation/" class="md-nav__link">
        Controller Reconciliation
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="ingress-controller-sharding-for-openshfit-on-openstack-with-octavia">Ingress Controller sharding for OpenShfit on OpenStack with Octavia</h1>
<p>How to configure IngressController router sharding with OpenShift 4.x on top of OpenStack Platform 13 and Octavia and default HostNetwork endpointPublishingStrategy</p>
<h2 id="preface">Preface</h2>
<p>The official documentation describes how to configure router sharding:
<a href="https://docs.openshift.com/container-platform/4.3/networking/configuring_ingress_cluster_traffic/configuring-ingress-cluster-traffic-ingress-controller.html#nw-ingress-sharding-namespace-labels_configuring-ingress-cluster-traffic-ingress-controller">https://docs.openshift.com/container-platform/4.3/networking/configuring_ingress_cluster_traffic/configuring-ingress-cluster-traffic-ingress-controller.html#nw-ingress-sharding-namespace-labels_configuring-ingress-cluster-traffic-ingress-controller</a></p>
<p>However, the default <code>endpointPublishingStrategy</code> is <code>HostNetwork</code> and by default, OpenShift configures only a single VIP for installations in OpenStack. It is possible to configure Kuryr (supported) or Octavia loadbalancers (unsupported, see <a href="https://access.redhat.com/solutions/4722521">https://access.redhat.com/solutions/4722521</a>). In that case, the IngressController's endpoint publishing strategy needs to be set to <code>LoadBalancerService</code>:</p>
<pre><code>spec:
  endpointPublishingStrategy:
    type: LoadBalancerService
</code></pre>
<p>But it is also possible to keep the default <code>endpointPublishingStrategy</code>as <code>HostNetwork</code> and configure additional load balancers. This is a similar approach as chosen for vSphere deployments: <a href="https://docs.openshift.com/container-platform/4.3/installing/installing_vsphere/installing-vsphere.html">https://docs.openshift.com/container-platform/4.3/installing/installing_vsphere/installing-vsphere.html</a></p>
<p>The following examples use 3 namespaces, <code>default</code>, <code>test1</code>, <code>test2</code>. Each namespace will be served by one IngressController. The environment hosts 3 worker nodes. Due to limitations of the <code>HostNetwork</code> strategy, each worker node can host exactly one IngressController's router instance. Meaning that the replica count for each controller needs to be set to 1 in an environment with 3 worker nodes.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Make sure that the environment was configured with Octavia.</p>
<h2 id="configuring-test-projects-and-the-default-project-ingresscontrollers">Configuring test projects and the default project IngressControllers</h2>
<p>Create 2 new projects and label them:</p>
<pre><code># Each ingresscontroller runs 1 replica = this works with 3 workers

# default ingress will match ns:
#     oc get ns -l type!=test1,type!=test2
# test1 ingress will match
#     oc get ns -l type=test1
# test2 ingress will match
#     oc get ns -l type=test2

oc new-project test1
oc new-project test2
oc label namespace test1 &quot;type=test1&quot;
oc label namespace test2 &quot;type=test2&quot;
</code></pre>
<p>Create a label on each worker node to pin IngressController routers to a particular node:</p>
<pre><code>oc label node cluster-7n7w9-worker-zpq85 &quot;ingressoperator=default&quot;
oc label node cluster-7n7w9-worker-zpq84 &quot;ingressoperator=test1&quot;
oc label node cluster-7n7w9-worker-zpq83 &quot;ingressoperator=test2&quot;
</code></pre>
<h2 id="configuring-ingresscontrollers">Configuring IngressControllers</h2>
<p>Now, patch the default IngressController to force node selection and to make sure that it will not serve namespaces test1 and test2:</p>
<p><code>operator-default-patch.yaml</code></p>
<pre><code>spec:
  replicas: 1
  namespaceSelector:
    matchExpressions:
    - key: type
      operator: NotIn
      values:
      - test1
      - test2
  nodePlacement:
    nodeSelector:
      matchLabels:
        ingressoperator: default
</code></pre>
<pre><code>oc project default
oc patch -n openshift-ingress-operator ingresscontroller default --type=&quot;merge&quot; -p &quot;$(cat operator-default-patch.yaml)&quot;
</code></pre>
<p>Now, create IngressOperators for namespaces test1 and test2:</p>
<p><code>operator-test1.yaml</code></p>
<pre><code>apiVersion: v1
items:
- apiVersion: operator.openshift.io/v1
  kind: IngressController
  metadata:
    name: test1-ingress-controller
    namespace: openshift-ingress-operator
  spec:
    replicas: 1
    domain: test1.cluster.example.com
    nodePlacement:
      nodeSelector:
        matchLabels:
          node-role.kubernetes.io/worker: &quot;&quot;
          ingressoperator: &quot;test1&quot;
    namespaceSelector:
      matchLabels:
        type: test1
    endpointPublishingStrategy:
      type: HostNetwork
      #type: LoadBalancerService
  status: {}
kind: List
metadata:
  resourceVersion: &quot;&quot;
  selfLink: &quot;&quot;
</code></pre>
<p><code>operator-test2.yaml</code></p>
<pre><code>apiVersion: v1
items:
- apiVersion: operator.openshift.io/v1
  kind: IngressController
  metadata:
    name: test2-ingress-controller
    namespace: openshift-ingress-operator
  spec:
    replicas: 1
    domain: test2.cluster.example.com
    nodePlacement:
      nodeSelector:
        matchLabels:
          node-role.kubernetes.io/worker: &quot;&quot;
          ingressoperator: test2
    namespaceSelector:
      matchLabels:
        type: test2
  status: {}
kind: List
metadata:
  resourceVersion: &quot;&quot;
  selfLink: &quot;&quot;
</code></pre>
<pre><code>oc project test1
oc apply -f operator-test1.yaml
</code></pre>
<pre><code>oc project test2
oc apply -f operator-test2.yaml
</code></pre>
<p>Note that at this point, the default IngressController routing will be broken. OCP on OSP runs a keepalived service which can be on either of the worker nodes.
Only one of the 3 IngressControllers will be served at this moment. We will change this in a moment.</p>
<h2 id="creating-test-builds-and-services">Creating test builds and services</h2>
<pre><code>oc project default
oc apply -f fh-build.yaml
oc start-build fh-build --follow
oc apply -f fh-ingress.yaml

oc project test1
oc adm policy add-scc-to-user anyuid -z default
oc apply -f fh-test1-build.yaml
oc start-build fh-test1-build --follow
oc apply -f fh-test1-ingress.yaml

oc project test2
oc adm policy add-scc-to-user anyuid -z default
oc apply -f fh-test2-build.yaml
oc start-build fh-test2-build --follow
oc apply -f fh-test2-ingress.yaml
</code></pre>
<p><code>fh-build.yaml</code></p>
<pre><code>apiVersion: image.openshift.io/v1
kind: ImageStream
metadata:
  creationTimestamp: null
  generation: 1
  name: fh
  selfLink: /apis/image.openshift.io/v1/namespaces/default/imagestreams/fh
spec:
  lookupPolicy:
    local: false
status:
  dockerImageRepository: docker-registry.default.svc:5000/fh
---
apiVersion: v1
data:
  run-apache.sh: |
    #!/bin/bash

    /usr/sbin/httpd $OPTIONS -DFOREGROUND
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: run-apache
  selfLink: /api/v1/namespaces/default/configmaps/run-apache
---
apiVersion: v1
kind: BuildConfig
metadata:
  name: fh-build
spec:
  source:
    configMaps:
      - configMap:
          name: run-apache
    dockerfile: |
       FROM fedora
       EXPOSE 8080
       RUN yum install httpd -y
       RUN yum install tcpdump -y
       RUN yum install iproute -y
       RUN yum install procps-ng -y
       RUN echo &quot;Apache default&quot; &gt;&gt; /var/www/html/index.html
       ADD run-apache.sh /usr/share/httpd/run-apache.sh
       RUN chown apache. /run/httpd/ -R
       RUN chmod -v +rx /usr/share/httpd/run-apache.sh
       RUN chown apache.  /usr/share/httpd/run-apache.sh
       RUN usermod apache -s /bin/bash
       RUN sed -i 's/Listen 80/Listen 8080/' /etc/httpd/conf/httpd.conf
       RUN chown apache. /etc/httpd/logs/ -R
       USER apache
       CMD [&quot;/usr/share/httpd/run-apache.sh&quot;]
  strategy:
    dockerStrategy:
      noCache: true
  output:
    to:
      kind: ImageStreamTag
      name: fh:latest

</code></pre>
<p><code>fh-ingress.yaml</code></p>
<pre><code>apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: fhingress-ingress
  annotations:
    kubernetes.io/ingress.allow-http: &quot;true&quot;
spec:
  rules:
  - host: fh.apps.cluster.example.com
    http:
      paths:
      - path: /
        backend:
          serviceName: fhingress-service
          servicePort: 80
---
apiVersion: v1
kind: Service
metadata:
  name: fhingress-service
  labels:
    app: fhingress-deploymentconfig
spec:
  selector:
    app: fhingress-pod
  ports:
    - protocol: TCP
      port: 80
      targetPort: 8080
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fhingress-deployment
  labels:
    app: fhingress-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: fhingress-pod
  template:
    metadata:
      labels:
        app: fhingress-pod
    spec:
      containers:
      - name: fhingress
        image: image-registry.openshift-image-registry.svc:5000/default/fh
        imagePullPolicy: Always
</code></pre>
<p><code>fh-test1-build.yaml</code></p>
<pre><code>apiVersion: image.openshift.io/v1
kind: ImageStream
metadata:
  creationTimestamp: null
  generation: 1
  name: fh-test1
  selfLink: /apis/image.openshift.io/v1/namespaces/default/imagestreams/fh-test1
spec:
  lookupPolicy:
    local: false
status:
  dockerImageRepository: docker-registry.default.svc:5000/fh-test1
---
apiVersion: v1
data:
  run-apache.sh: |
    #!/bin/bash

    /usr/sbin/httpd $OPTIONS -DFOREGROUND
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: run-apache
  selfLink: /api/v1/namespaces/default/configmaps/run-apache
---
apiVersion: v1
kind: BuildConfig
metadata:
  name: fh-test1-build
spec:
  source:
    configMaps:
      - configMap:
          name: run-apache
    dockerfile: |
       FROM fedora
       EXPOSE 8080
       RUN yum install httpd -y
       RUN yum install tcpdump -y
       RUN yum install iproute -y
       RUN yum install procps-ng -y
       RUN echo &quot;Apache test1&quot; &gt;&gt; /var/www/html/index.html
       ADD run-apache.sh /usr/share/httpd/run-apache.sh
       RUN chown apache. /run/httpd/ -R
       RUN chmod -v +rx /usr/share/httpd/run-apache.sh
       RUN chown apache.  /usr/share/httpd/run-apache.sh
       RUN usermod apache -s /bin/bash
       RUN sed -i 's/Listen 80/Listen 8080/' /etc/httpd/conf/httpd.conf
       RUN chown apache. /etc/httpd/logs/ -R
       USER apache
       CMD [&quot;/usr/share/httpd/run-apache.sh&quot;]
  strategy:
    dockerStrategy:
      noCache: true
  output:
    to:
      kind: ImageStreamTag
      name: fh-test1:latest

</code></pre>
<p><code>fh-test1-ingress.yaml</code></p>
<pre><code>apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: fh-test1ingress-ingress
  annotations:
    kubernetes.io/ingress.allow-http: &quot;true&quot;
spec:
  rules:
  - host: fh.test1.cluster.example.com
    http:
      paths:
      - path: /
        backend:
          serviceName: fh-test1ingress-service
          servicePort: 80
---
apiVersion: v1
kind: Service
metadata:
  name: fh-test1ingress-service
  labels:
    app: fh-test1ingress-deploymentconfig
spec:
  selector:
    app: fh-test1ingress-pod
  ports:
    - protocol: TCP
      port: 80
      targetPort: 8080
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fh-test1ingress-deployment
  labels:
    app: fh-test1ingress-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: fh-test1ingress-pod
  template:
    metadata:
      labels:
        app: fh-test1ingress-pod
    spec:
      containers:
      - name: fh-test1ingress
        image: image-registry.openshift-image-registry.svc:5000/test1/fh-test1
        imagePullPolicy: Always
</code></pre>
<p><code>fh-test2-build.yaml</code></p>
<pre><code>apiVersion: image.openshift.io/v1
kind: ImageStream
metadata:
  creationTimestamp: null
  generation: 1
  name: fh-test2
  selfLink: /apis/image.openshift.io/v1/namespaces/default/imagestreams/fh-test2
spec:
  lookupPolicy:
    local: false
status:
  dockerImageRepository: docker-registry.default.svc:5000/fh-test2
---
apiVersion: v1
data:
  run-apache.sh: |
    #!/bin/bash

    /usr/sbin/httpd $OPTIONS -DFOREGROUND
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: run-apache
  selfLink: /api/v1/namespaces/default/configmaps/run-apache
---
apiVersion: v1
kind: BuildConfig
metadata:
  name: fh-test2-build
spec:
  source:
    configMaps:
      - configMap:
          name: run-apache
    dockerfile: |
       FROM fedora
       EXPOSE 8080
       RUN yum install httpd -y
       RUN yum install tcpdump -y
       RUN yum install iproute -y
       RUN yum install procps-ng -y
       RUN echo &quot;Apache test2&quot; &gt;&gt; /var/www/html/index.html
       ADD run-apache.sh /usr/share/httpd/run-apache.sh
       RUN chown apache. /run/httpd/ -R
       RUN chmod -v +rx /usr/share/httpd/run-apache.sh
       RUN chown apache.  /usr/share/httpd/run-apache.sh
       RUN usermod apache -s /bin/bash
       RUN sed -i 's/Listen 80/Listen 8080/' /etc/httpd/conf/httpd.conf
       RUN chown apache. /etc/httpd/logs/ -R
       USER apache
       CMD [&quot;/usr/share/httpd/run-apache.sh&quot;]
  strategy:
    dockerStrategy:
      noCache: true
  output:
    to:
      kind: ImageStreamTag
      name: fh-test2:latest

</code></pre>
<p><code>fh-test2-ingress.yaml</code></p>
<pre><code>apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: fh-test2ingress-ingress
  annotations:
    kubernetes.io/ingress.allow-http: &quot;true&quot;
spec:
  rules:
  - host: fh.test2.cluster.example.com
    http:
      paths:
      - path: /
        backend:
          serviceName: fh-test2ingress-service
          servicePort: 80
---
apiVersion: v1
kind: Service
metadata:
  name: fh-test2ingress-service
  labels:
    app: fh-test2ingress-deploymentconfig
spec:
  selector:
    app: fh-test2ingress-pod
  ports:
    - protocol: TCP
      port: 80
      targetPort: 8080
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: fh-test2ingress-deployment
  labels:
    app: fh-test2ingress-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: fh-test2ingress-pod
  template:
    metadata:
      labels:
        app: fh-test2ingress-pod
    spec:
      containers:
      - name: fh-test2ingress
        image: image-registry.openshift-image-registry.svc:5000/test2/fh-test2
        imagePullPolicy: Always
</code></pre>
<h2 id="configuring-octavia-loadbalancers-for-server-ingresscontrollers">Configuring Octavia loadbalancers for server IngressControllers</h2>
<p>Instead of using the default keepalived VIP, we are going to create one Octavia loadbalancer per IngressController:</p>
<pre><code>(overcloud) [stack@undercloud-0 ~]$ openstack server list
+--------------------------------------+----------------------------+--------+--------------------------------------------------------------------------+---------------------+--------------+
| ID                                   | Name                       | Status | Networks                                                                 | Image               | Flavor       |
+--------------------------------------+----------------------------+--------+--------------------------------------------------------------------------+---------------------+--------------+
| 2e5bc035-e6da-4807-8c96-268c2587c759 | cluster-7n7w9-worker-fkv5p | ACTIVE | cluster-7n7w9-openshift=172.31.0.45                                      | cluster-7n7w9-rhcos | m1.openshift |
| 14406e18-74bd-4723-81b1-ea38080d3e72 | cluster-7n7w9-worker-ggxds | ACTIVE | cluster-7n7w9-openshift=172.31.0.13                                      | cluster-7n7w9-rhcos | m1.openshift |
| 7ad9432b-bb4f-4cc1-b842-1e63a323a3b5 | cluster-7n7w9-worker-zpq85 | ACTIVE | cluster-7n7w9-openshift=172.31.0.14                                      | cluster-7n7w9-rhcos | m1.openshift |
| dc4db4f7-d410-4404-9166-66204931538c | cluster-7n7w9-master-1     | ACTIVE | cluster-7n7w9-openshift=172.31.0.15                                      | cluster-7n7w9-rhcos | m1.openshift |
| e0e3a4cd-4d1e-4496-9e59-ba8c0d62b54a | cluster-7n7w9-master-2     | ACTIVE | cluster-7n7w9-openshift=172.31.0.23                                      | cluster-7n7w9-rhcos | m1.openshift |
| 1b76ade6-ad53-43c8-9f15-fd3d550e0a17 | cluster-7n7w9-master-0     | ACTIVE | cluster-7n7w9-openshift=172.31.0.39                                      | cluster-7n7w9-rhcos | m1.openshift |
| 43810d22-74ce-4f5a-a615-d77d1628dde7 | rhel-test1                 | ACTIVE | private1=2000:192:168:0:f816:3eff:fea4:39e1, 192.168.0.108, 172.16.0.208 | rhel                | m1.small     |
+--------------------------------------+----------------------------+--------+--------------------------------------------------------------------------+---------------------+--------------+
(overcloud) [stack@undercloud-0 ~]$ openstack server list --all
+--------------------------------------+----------------------------------------------+--------+--------------------------------------------------------------------------+----------------------------------------+--------------+
| ID                                   | Name                                         | Status | Networks                                                                 | Image                                  | Flavor       |
+--------------------------------------+----------------------------------------------+--------+--------------------------------------------------------------------------+----------------------------------------+--------------+
| 2bdd7c68-2b00-4824-9ebe-6cc3babdfe77 | amphora-da1a5888-1052-4a6b-a05d-fc21c22a5cf5 | ACTIVE | lb-mgmt-net=172.24.0.13; cluster-7n7w9-openshift=172.31.0.20             | octavia-amphora-13.0-20200323.2.x86_64 |              |
| 2e5bc035-e6da-4807-8c96-268c2587c759 | cluster-7n7w9-worker-fkv5p                   | ACTIVE | cluster-7n7w9-openshift=172.31.0.45                                      | cluster-7n7w9-rhcos                    | m1.openshift |
| 14406e18-74bd-4723-81b1-ea38080d3e72 | cluster-7n7w9-worker-ggxds                   | ACTIVE | cluster-7n7w9-openshift=172.31.0.13                                      | cluster-7n7w9-rhcos                    | m1.openshift |
| 7ad9432b-bb4f-4cc1-b842-1e63a323a3b5 | cluster-7n7w9-worker-zpq85                   | ACTIVE | cluster-7n7w9-openshift=172.31.0.14                                      | cluster-7n7w9-rhcos                    | m1.openshift |
| dc4db4f7-d410-4404-9166-66204931538c | cluster-7n7w9-master-1                       | ACTIVE | cluster-7n7w9-openshift=172.31.0.15                                      | cluster-7n7w9-rhcos                    | m1.openshift |
| e0e3a4cd-4d1e-4496-9e59-ba8c0d62b54a | cluster-7n7w9-master-2                       | ACTIVE | cluster-7n7w9-openshift=172.31.0.23                                      | cluster-7n7w9-rhcos                    | m1.openshift |
| 1b76ade6-ad53-43c8-9f15-fd3d550e0a17 | cluster-7n7w9-master-0                       | ACTIVE | cluster-7n7w9-openshift=172.31.0.39                                      | cluster-7n7w9-rhcos                    | m1.openshift |
| 43810d22-74ce-4f5a-a615-d77d1628dde7 | rhel-test1                                   | ACTIVE | private1=2000:192:168:0:f816:3eff:fea4:39e1, 192.168.0.108, 172.16.0.208 | rhel                                   | m1.small     |
+--------------------------------------+----------------------------------------------+--------+--------------------------------------------------------------------------+----------------------------------------+--------------+

(overcloud) [stack@undercloud-0 ~]$  # openstack loadbalancer create --name ingress-controller-default --vip-subnet-id 
(overcloud) [stack@undercloud-0 ~]$ openstack subnet list
+--------------------------------------+---------------------------------------------------+--------------------------------------+----------------------+
| ID                                   | Name                                              | Network                              | Subnet               |
+--------------------------------------+---------------------------------------------------+--------------------------------------+----------------------+
| 14a3bd37-7a3a-4f14-bd03-26d4860d91db | provider1-subnet                                  | d14c0815-22b5-4cdf-9db1-5da7951f1e0a | 172.16.0.0/24        |
| 5aef701a-c93f-4210-8722-3fdf8ef1ddf1 | provider1-ipv6-subnet                             | d14c0815-22b5-4cdf-9db1-5da7951f1e0a | 2000:10::/64         |
| 63950c5e-fc70-49ad-8d6b-092b8ba39016 | cluster-7n7w9-nodes                               | ac9c0bd9-3793-48d3-a12e-eaa06028a366 | 172.31.0.0/16        |
| 7f65d115-8077-4219-9ef8-3b0820ba8b52 | private1-ipv6-subnet                              | 0af094e6-1dac-4479-9ebc-88f8f7f0b254 | 2000:192:168::/64    |
| 9fa85591-718c-4fb9-88d8-0c2e5b0771ee | private1-subnet                                   | 0af094e6-1dac-4479-9ebc-88f8f7f0b254 | 192.168.0.0/24       |
| a0827588-7460-4f2f-9f29-12bb1be49c76 | lb-mgmt-subnet                                    | 85cd5be1-3d8b-4929-b9ac-2e770cb12ba9 | 172.24.0.0/16        |
| a5e9841d-38a7-47a0-8db2-f302a67a9845 | private2-subnet                                   | fdb07e70-7055-41a9-a8fa-10b2dce988b3 | 192.168.1.0/24       |
| af925c70-979e-4fa9-8704-72ec683a31f8 | private-mgmt-ipv6-subnet                          | 0d74f260-c3d6-4a77-8881-438c3bfaaa7b | 2000:192:168:10::/64 |
| c815a934-98ff-4daa-8b5e-5a0e5d91806f | private2-ipv6-subnet                              | fdb07e70-7055-41a9-a8fa-10b2dce988b3 | 2000:192:168:1::/64  |
| df05dd9e-6583-42a0-afee-e8f65d813e6f | private-mgmt-subnet                               | 0d74f260-c3d6-4a77-8881-438c3bfaaa7b | 192.168.10.0/24      |
| e1ebbac2-3d7c-4355-9624-f0920d705f76 | HA subnet tenant a416f556938f454f849da42faa317cd3 | 5079d963-7301-4218-855b-f7d33fce1081 | 169.254.192.0/18     |
+--------------------------------------+---------------------------------------------------+--------------------------------------+----------------------+
(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer create --name ingress-controller-default --vip-subnet-id cluster-7n7w9-nodes
+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| admin_state_up      | True                                 |
| created_at          | 2020-04-08T10:27:46                  |
| description         |                                      |
| flavor              |                                      |
| id                  | e5feb42d-77e4-428b-9ad0-55fe6d30f3b3 |
| listeners           |                                      |
| name                | ingress-controller-default           |
| operating_status    | OFFLINE                              |
| pools               |                                      |
| project_id          | a416f556938f454f849da42faa317cd3     |
| provider            | octavia                              |
| provisioning_status | PENDING_CREATE                       |
| updated_at          | None                                 |
| vip_address         | 172.31.0.21                          |
| vip_network_id      | ac9c0bd9-3793-48d3-a12e-eaa06028a366 |
| vip_port_id         | f336d8c6-8f47-4d61-a865-19f34a671ffa |
| vip_qos_policy_id   | None                                 |
| vip_subnet_id       | 63950c5e-fc70-49ad-8d6b-092b8ba39016 |
+---------------------+--------------------------------------+
(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer create --name ingress-controller-test1 --vip-subnet-id cluster-7n7w9-nodes
+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| admin_state_up      | True                                 |
| created_at          | 2020-04-08T10:28:33                  |
| description         |                                      |
| flavor              |                                      |
| id                  | a636c15a-92a2-4253-8945-8875c58aae96 |
| listeners           |                                      |
| name                | ingress-controller-test1             |
| operating_status    | OFFLINE                              |
| pools               |                                      |
| project_id          | a416f556938f454f849da42faa317cd3     |
| provider            | octavia                              |
| provisioning_status | PENDING_CREATE                       |
| updated_at          | None                                 |
| vip_address         | 172.31.0.24                          |
| vip_network_id      | ac9c0bd9-3793-48d3-a12e-eaa06028a366 |
| vip_port_id         | 7d85d059-65c2-47af-90a2-35337d4396f8 |
| vip_qos_policy_id   | None                                 |
| vip_subnet_id       | 63950c5e-fc70-49ad-8d6b-092b8ba39016 |
+---------------------+--------------------------------------+
(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer create --name ingress-controller-test2 --vip-subnet-id cluster-7n7w9-nodes
+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| admin_state_up      | True                                 |
| created_at          | 2020-04-08T10:28:44                  |
| description         |                                      |
| flavor              |                                      |
| id                  | c2041396-66f5-4726-ad47-9ce7d2f7904f |
| listeners           |                                      |
| name                | ingress-controller-test2             |
| operating_status    | OFFLINE                              |
| pools               |                                      |
| project_id          | a416f556938f454f849da42faa317cd3     |
| provider            | octavia                              |
| provisioning_status | PENDING_CREATE                       |
| updated_at          | None                                 |
| vip_address         | 172.31.0.27                          |
| vip_network_id      | ac9c0bd9-3793-48d3-a12e-eaa06028a366 |
| vip_port_id         | ce0129ca-9b39-4ee1-8d12-bb0685967f65 |
| vip_qos_policy_id   | None                                 |
| vip_subnet_id       | 63950c5e-fc70-49ad-8d6b-092b8ba39016 |
+---------------------+--------------------------------------+

# wait until all loadbalancers are active

(overcloud) [stack@undercloud-0 ~]$ watch openstack loadbalancer list
(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer list
+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+
| id                                   | name                       | project_id                       | vip_address | provisioning_status | provider |
+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+
| e5feb42d-77e4-428b-9ad0-55fe6d30f3b3 | ingress-controller-default | a416f556938f454f849da42faa317cd3 | 172.31.0.21 | ACTIVE              | octavia  |
| a636c15a-92a2-4253-8945-8875c58aae96 | ingress-controller-test1   | a416f556938f454f849da42faa317cd3 | 172.31.0.24 | ACTIVE              | octavia  |
| c2041396-66f5-4726-ad47-9ce7d2f7904f | ingress-controller-test2   | a416f556938f454f849da42faa317cd3 | 172.31.0.27 | ACTIVE              | octavia  |
+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+
(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer listener create --name ingress-controller-default-listener --protocol HTTP --protocol-port 80 ingress-controller-default
+---------------------------+--------------------------------------+
| Field                     | Value                                |
+---------------------------+--------------------------------------+
| admin_state_up            | True                                 |
| connection_limit          | -1                                   |
| created_at                | 2020-04-08T11:00:01                  |
| default_pool_id           | None                                 |
| default_tls_container_ref | None                                 |
| description               |                                      |
| id                        | be0d73e6-1162-4363-ad62-0d74e2c16f6b |
| insert_headers            | None                                 |
| l7policies                |                                      |
| loadbalancers             | e5feb42d-77e4-428b-9ad0-55fe6d30f3b3 |
| name                      | ingress-controller-default-listener  |
| operating_status          | OFFLINE                              |
| project_id                | a416f556938f454f849da42faa317cd3     |
| protocol                  | HTTP                                 |
| protocol_port             | 80                                   |
| provisioning_status       | PENDING_CREATE                       |
| sni_container_refs        | []                                   |
| updated_at                | None                                 |
+---------------------------+--------------------------------------+
(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer pool create --name ingress-controller-default-pool --lb-algorithm ROUND_ROBIN --listener ingress-controller-default-listener --protocol HTTP
+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| admin_state_up      | True                                 |
| created_at          | 2020-04-08T11:00:13                  |
| description         |                                      |
| healthmonitor_id    |                                      |
| id                  | 47dc4567-f182-4c16-a2ec-aa306e40779d |
| lb_algorithm        | ROUND_ROBIN                          |
| listeners           | be0d73e6-1162-4363-ad62-0d74e2c16f6b |
| loadbalancers       | e5feb42d-77e4-428b-9ad0-55fe6d30f3b3 |
| members             |                                      |
| name                | ingress-controller-default-pool      |
| operating_status    | OFFLINE                              |
| project_id          | a416f556938f454f849da42faa317cd3     |
| protocol            | HTTP                                 |
| provisioning_status | PENDING_CREATE                       |
| session_persistence | None                                 |
| updated_at          | None                                 |
+---------------------+--------------------------------------+
(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer member create --subnet-id cluster-7n7w9-nodes --address 172.31.0.45 --protocol-port 80 ingress-controller-default-pool
+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| address             | 172.31.0.45                          |
| admin_state_up      | True                                 |
| created_at          | 2020-04-08T11:02:06                  |
| id                  | 431aa74f-e98d-41fd-aab9-bf907f1e3993 |
| name                |                                      |
| operating_status    | NO_MONITOR                           |
| project_id          | a416f556938f454f849da42faa317cd3     |
| protocol_port       | 80                                   |
| provisioning_status | PENDING_CREATE                       |
| subnet_id           | 63950c5e-fc70-49ad-8d6b-092b8ba39016 |
| updated_at          | None                                 |
| weight              | 1                                    |
| monitor_port        | None                                 |
| monitor_address     | None                                 |
+---------------------+--------------------------------------+
(overcloud) [stack@undercloud-0 ~]$ openstack floating ip create provider1
+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| created_at          | 2020-04-08T11:02:34Z                 |
| description         |                                      |
| fixed_ip_address    | None                                 |
| floating_ip_address | 172.16.0.211                         |
| floating_network_id | d14c0815-22b5-4cdf-9db1-5da7951f1e0a |
| id                  | 44720e51-dc95-453b-9993-1cac1fbf40b9 |
| name                | 172.16.0.211                         |
| port_id             | None                                 |
| project_id          | a416f556938f454f849da42faa317cd3     |
| qos_policy_id       | None                                 |
| revision_number     | 0                                    |
| router_id           | None                                 |
| status              | DOWN                                 |
| subnet_id           | None                                 |
| updated_at          | 2020-04-08T11:02:34Z                 |
+---------------------+--------------------------------------+
oad(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer list
+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+
| id                                   | name                       | project_id                       | vip_address | provisioning_status | provider |
+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+
| e5feb42d-77e4-428b-9ad0-55fe6d30f3b3 | ingress-controller-default | a416f556938f454f849da42faa317cd3 | 172.31.0.21 | ACTIVE              | octavia  |
| a636c15a-92a2-4253-8945-8875c58aae96 | ingress-controller-test1   | a416f556938f454f849da42faa317cd3 | 172.31.0.24 | ACTIVE              | octavia  |
| c2041396-66f5-4726-ad47-9ce7d2f7904f | ingress-controller-test2   | a416f556938f454f849da42faa317cd3 | 172.31.0.27 | ACTIVE              | octavia  |
+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+
(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer listener create --name ingress-controller-test1-listener --protocol HTTP --protocol-port 80 ingress-controller-test1
+---------------------------+--------------------------------------+
| Field                     | Value                                |
+---------------------------+--------------------------------------+
| admin_state_up            | True                                 |
| connection_limit          | -1                                   |
| created_at                | 2020-04-08T11:03:33                  |
| default_pool_id           | None                                 |
| default_tls_container_ref | None                                 |
| description               |                                      |
| id                        | 9e7236f5-cb15-4c8c-8ffb-a00182c44871 |
| insert_headers            | None                                 |
| l7policies                |                                      |
| loadbalancers             | a636c15a-92a2-4253-8945-8875c58aae96 |
| name                      | ingress-controller-test1-listener    |
| operating_status          | OFFLINE                              |
| project_id                | a416f556938f454f849da42faa317cd3     |
| protocol                  | HTTP                                 |
| protocol_port             | 80                                   |
| provisioning_status       | PENDING_CREATE                       |
| sni_container_refs        | []                                   |
| updated_at                | None                                 |
+---------------------------+--------------------------------------+
(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer listener create --name ingress-controller-test2-listener --protocol HTTP --protocol-port 80 ingress-controller-test2
+---------------------------+--------------------------------------+
| Field                     | Value                                |
+---------------------------+--------------------------------------+
| admin_state_up            | True                                 |
| connection_limit          | -1                                   |
| created_at                | 2020-04-08T11:03:42                  |
| default_pool_id           | None                                 |
| default_tls_container_ref | None                                 |
| description               |                                      |
| id                        | 0cd99fe3-3750-4506-bafa-57cf4a15c7e8 |
| insert_headers            | None                                 |
| l7policies                |                                      |
| loadbalancers             | c2041396-66f5-4726-ad47-9ce7d2f7904f |
| name                      | ingress-controller-test2-listener    |
| operating_status          | OFFLINE                              |
| project_id                | a416f556938f454f849da42faa317cd3     |
| protocol                  | HTTP                                 |
| protocol_port             | 80                                   |
| provisioning_status       | PENDING_CREATE                       |
| sni_container_refs        | []                                   |
| updated_at                | None                                 |
+---------------------------+--------------------------------------+
(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer pool create --name ingress-controller-test1-pool --lb-algorithm ROUND_ROBIN --listener ingress-controller-test1-listener --protocol HTTP
+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| admin_state_up      | True                                 |
| created_at          | 2020-04-08T11:04:00                  |
| description         |                                      |
| healthmonitor_id    |                                      |
| id                  | d7e93f06-3afd-467d-b43a-4018e59d6be1 |
| lb_algorithm        | ROUND_ROBIN                          |
| listeners           | 9e7236f5-cb15-4c8c-8ffb-a00182c44871 |
| loadbalancers       | a636c15a-92a2-4253-8945-8875c58aae96 |
| members             |                                      |
| name                | ingress-controller-test1-pool        |
| operating_status    | OFFLINE                              |
| project_id          | a416f556938f454f849da42faa317cd3     |
| protocol            | HTTP                                 |
| provisioning_status | PENDING_CREATE                       |
| session_persistence | None                                 |
| updated_at          | None                                 |
+---------------------+--------------------------------------+
(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer pool create --name ingress-controller-test2-pool --lb-algorithm ROUND_ROBIN --listener ingress-controller-test2-listener --protocol HTTP
+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| admin_state_up      | True                                 |
| created_at          | 2020-04-08T11:04:10                  |
| description         |                                      |
| healthmonitor_id    |                                      |
| id                  | c6a4c5dd-836f-42fe-91bf-5a71d3109691 |
| lb_algorithm        | ROUND_ROBIN                          |
| listeners           | 0cd99fe3-3750-4506-bafa-57cf4a15c7e8 |
| loadbalancers       | c2041396-66f5-4726-ad47-9ce7d2f7904f |
| members             |                                      |
| name                | ingress-controller-test2-pool        |
| operating_status    | OFFLINE                              |
| project_id          | a416f556938f454f849da42faa317cd3     |
| protocol            | HTTP                                 |
| provisioning_status | PENDING_CREATE                       |
| session_persistence | None                                 |
| updated_at          | None                                 |
+---------------------+--------------------------------------+
(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer member create --subnet-id cluster-7n7w9-nodes --address 172.31.0.13 --protocol-port 80 ingress-controller-test1-pool
+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| address             | 172.31.0.13                          |
| admin_state_up      | True                                 |
| created_at          | 2020-04-08T11:05:02                  |
| id                  | 584a9a8b-eb1c-41b4-9308-0a1cd9f91122 |
| name                |                                      |
| operating_status    | NO_MONITOR                           |
| project_id          | a416f556938f454f849da42faa317cd3     |
| protocol_port       | 80                                   |
| provisioning_status | PENDING_CREATE                       |
| subnet_id           | 63950c5e-fc70-49ad-8d6b-092b8ba39016 |
| updated_at          | None                                 |
| weight              | 1                                    |
| monitor_port        | None                                 |
| monitor_address     | None                                 |
+---------------------+--------------------------------------+
(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer member create --subnet-id cluster-7n7w9-nodes --address 172.31.0.14 --protocol-port 80 ingress-controller-test2-pool
openstack floating ip creat+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| address             | 172.31.0.14                          |
| admin_state_up      | True                                 |
| created_at          | 2020-04-08T11:05:14                  |
| id                  | 8d859649-fcc1-4ffe-b9be-0ed6540346e1 |
| name                |                                      |
| operating_status    | NO_MONITOR                           |
| project_id          | a416f556938f454f849da42faa317cd3     |
| protocol_port       | 80                                   |
| provisioning_status | PENDING_CREATE                       |
| subnet_id           | 63950c5e-fc70-49ad-8d6b-092b8ba39016 |
| updated_at          | None                                 |
| weight              | 1                                    |
| monitor_port        | None                                 |
| monitor_address     | None                                 |
+---------------------+--------------------------------------+
(overcloud) [stack@undercloud-0 ~]$ openstack floating ip create provider1
o[+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| created_at          | 2020-04-08T11:05:27Z                 |
| description         |                                      |
| fixed_ip_address    | None                                 |
| floating_ip_address | 172.16.0.204                         |
| floating_network_id | d14c0815-22b5-4cdf-9db1-5da7951f1e0a |
| id                  | 72181227-12f0-4790-bd7c-208785e05918 |
| name                | 172.16.0.204                         |
| port_id             | None                                 |
| project_id          | a416f556938f454f849da42faa317cd3     |
| qos_policy_id       | None                                 |
| revision_number     | 0                                    |
| router_id           | None                                 |
| status              | DOWN                                 |
| subnet_id           | None                                 |
| updated_at          | 2020-04-08T11:05:27Z                 |
+---------------------+--------------------------------------+
(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer list
openstack floating ip +--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+
| id                                   | name                       | project_id                       | vip_address | provisioning_status | provider |
+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+
| e5feb42d-77e4-428b-9ad0-55fe6d30f3b3 | ingress-controller-default | a416f556938f454f849da42faa317cd3 | 172.31.0.21 | ACTIVE              | octavia  |
| a636c15a-92a2-4253-8945-8875c58aae96 | ingress-controller-test1   | a416f556938f454f849da42faa317cd3 | 172.31.0.24 | ACTIVE              | octavia  |
| c2041396-66f5-4726-ad47-9ce7d2f7904f | ingress-controller-test2   | a416f556938f454f849da42faa317cd3 | 172.31.0.27 | ACTIVE              | octavia  |
+--------------------------------------+----------------------------+----------------------------------+-------------+---------------------+----------+
l(overcloud) [stack@undercloud-0 ~]$ openstack floating ip list
+--------------------------------------+---------------------+------------------+--------------------------------------+--------------------------------------+----------------------------------+
| ID                                   | Floating IP Address | Fixed IP Address | Port                                 | Floating Network                     | Project                          |
+--------------------------------------+---------------------+------------------+--------------------------------------+--------------------------------------+----------------------------------+
| 0a3e9fa7-577c-47f9-b9e4-f583bd3ce180 | 172.16.0.208        | 192.168.0.108    | 03d91ec5-8de6-415b-9581-d00501bb40ed | d14c0815-22b5-4cdf-9db1-5da7951f1e0a | a416f556938f454f849da42faa317cd3 |
| 44720e51-dc95-453b-9993-1cac1fbf40b9 | 172.16.0.211        | None             | None                                 | d14c0815-22b5-4cdf-9db1-5da7951f1e0a | a416f556938f454f849da42faa317cd3 |
| 497c6667-22b3-4ed7-b6af-1c5091b14209 | 172.16.0.213        | 172.31.0.5       | 3bc4d5e1-90c9-4da1-86cd-d5e5d6fe985d | d14c0815-22b5-4cdf-9db1-5da7951f1e0a | a416f556938f454f849da42faa317cd3 |
| 4b9e9daf-4e7f-4338-ad70-6206e7e56367 | 172.16.0.214        | 172.31.0.7       | ee68b77c-95af-4bb2-ba62-c4d06d728c47 | d14c0815-22b5-4cdf-9db1-5da7951f1e0a | a416f556938f454f849da42faa317cd3 |
| 72181227-12f0-4790-bd7c-208785e05918 | 172.16.0.204        | None             | None                                 | d14c0815-22b5-4cdf-9db1-5da7951f1e0a | a416f556938f454f849da42faa317cd3 |
| a2693cfc-4379-4d9b-bb90-a86c3fcafd9c | 172.16.0.217        | None             | None                                 | d14c0815-22b5-4cdf-9db1-5da7951f1e0a | a416f556938f454f849da42faa317cd3 |
+--------------------------------------+---------------------+------------------+--------------------------------------+--------------------------------------+----------------------------------+
(overcloud) [stack@undercloud-0 ~]$ openstack port list | grep 172.31.0.21
| f336d8c6-8f47-4d61-a865-19f34a671ffa | octavia-lb-e5feb42d-77e4-428b-9ad0-55fe6d30f3b3                       | fa:16:3e:f1:04:50 | ip_address='172.31.0.21', subnet_id='63950c5e-fc70-49ad-8d6b-092b8ba39016'                         | DOWN   |
(overcloud) [stack@undercloud-0 ~]$ openstack port list | grep 172.31.0.24
| 7d85d059-65c2-47af-90a2-35337d4396f8 | octavia-lb-a636c15a-92a2-4253-8945-8875c58aae96                       | fa:16:3e:8c:32:69 | ip_address='172.31.0.24', subnet_id='63950c5e-fc70-49ad-8d6b-092b8ba39016'                         | DOWN   |
(overcloud) [stack@undercloud-0 ~]$ openstack port list | grep 172.31.0.27
| ce0129ca-9b39-4ee1-8d12-bb0685967f65 | octavia-lb-c2041396-66f5-4726-ad47-9ce7d2f7904f                       | fa:16:3e:e0:d7:bd | ip_address='172.31.0.27', subnet_id='63950c5e-fc70-49ad-8d6b-092b8ba39016'                         | DOWN   |
(overcloud) [stack@undercloud-0 ~]$ openstack floating ip set 172.16.0.211 --port octavia-lb-e5feb42d-77e4-428b-9ad0-55fe6d30f3b3
(overcloud) [stack@undercloud-0 ~]$ openstack floating ip set 172.16.0.204 --port octavia-lb-a636c15a-92a2-4253-8945-8875c58aae96
(overcloud) [stack@undercloud-0 ~]$ openstack floating ip set 172.16.0.217 --port octavia-lb-c2041396-66f5-4726-ad47-9ce7d2f7904f
(overcloud) [stack@undercloud-0 ~]$ openstack loadbalancer member list ingress-controller-default-pool
+--------------------------------------+------+----------------------------------+---------------------+-------------+---------------+------------------+--------+
| id                                   | name | project_id                       | provisioning_status | address     | protocol_port | operating_status | weight |
+--------------------------------------+------+----------------------------------+---------------------+-------------+---------------+------------------+--------+
| 431aa74f-e98d-41fd-aab9-bf907f1e3993 |      | a416f556938f454f849da42faa317cd3 | ACTIVE              | 172.31.0.45 |            80 | NO_MONITOR       |      1 |
+--------------------------------------+------+----------------------------------+---------------------+-------------+---------------+------------------+--------+
(overcloud) [stack@undercloud-0 ~]$ curl ^C
</code></pre>
<p>Once this is done, update your DNS entries. In this lab case, I'm simply changing <code>/etc/hosts</code>:</p>
<pre><code>(overcloud) [stack@undercloud-0 ~]$ cat /etc/hosts
127.0.0.1   undercloud-0.redhat.local undercloud-0
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

# API cluster VIP
172.16.0.213 api.cluster.example.com

# original VIP
# 172.16.0.214 oauth-openshift.apps.cluster.example.com console-openshift-console.apps.cluster.example.com downloads-openshift-console.apps.cluster.example.com alertmanager-main-openshift-monitoring.apps.cluster.example.com grafana-openshift-monitoring.apps.cluster.example.com prometheus-k8s-openshift-monitoring.apps.cluster.example.com thanos-querier-openshift-monitoring.apps.cluster.example.com fh.apps.cluster.example.com fh.test2.cluster.example.com fh.test1.cluster.example.com

# new Octavia VIPs
172.16.0.211 oauth-openshift.apps.cluster.example.com console-openshift-console.apps.cluster.example.com downloads-openshift-console.apps.cluster.example.com alertmanager-main-openshift-monitoring.apps.cluster.example.com grafana-openshift-monitoring.apps.cluster.example.com prometheus-k8s-openshift-monitoring.apps.cluster.example.com thanos-querier-openshift-monitoring.apps.cluster.example.com fh.apps.cluster.example.com
172.16.0.204 fh.test1.cluster.example.com
172.16.0.217 fh.test2.cluster.example.com
</code></pre>
<h2 id="testing">Testing</h2>
<p>This should now work:</p>
<pre><code>(overcloud) [stack@undercloud-0 ~]$ curl fh.apps.cluster.example.com
Apache default
(overcloud) [stack@undercloud-0 ~]$ curl fh.test1.cluster.example.com
Apache test1
(overcloud) [stack@undercloud-0 ~]$ curl fh.test2.cluster.example.com
Apache test2
</code></pre>
                
                  
                    

<hr>
<div class="md-source-date">
  <small>
    
      Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">September 13, 2020</span>
    
  </small>
</div>
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../ocp4-infra-nodes-with-machineset-without-worker-label/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Infra nodes with MachineSets without worker label
            </div>
          </div>
        </a>
      
      
        <a href="../ingress-controller-sharding-on-separate-vip/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Ingress Controller Sharding on separate VIP
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["toc.integrate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.a1c7c35e.min.js"></script>
      
    
  </body>
</html>